<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mochawesome Report Card</title>
    
    <link rel="stylesheet" href="css/mochawesome.css">
  </head>
  <body>

    <!-- NAVBAR -->
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="report-info-cnt">
          <h1 class="report-title">buzzer.click</h1>
          <h3 class="report-date">Wednesday, September 28 2016, 01:55pm</h3>
        </div>
        <div class="nav-right">
          <div class="quick-summary-cnt">
              <ul class="list-unstyled quick-summary">
                <li class="qs-item summary-duration" title="Duration">5.753<span>S</span></li>
                <li class="qs-item summary-suites" title="Suites">36</li>
                <li class="qs-item summary-tests" title="Tests">119</li>
                <li class="qs-item summary-passes" title="Passed" data-filter="passed">119</li>
                <li class="qs-item summary-failures" title="Failed" data-filter="failed">0</li>
                <li class="qs-item summary-pending" title="Pending" data-filter="pending">0</li>
              </ul>          </div>
          <button class="nav-menu-btn open-menu"><i class="icon-menu"></i></button>
        </div>
      </div>
    </div>

    <!-- Report Summary -->
    <div class="summary">
      <div class="container">
          <div class="row">
            <div class="summary-col summary-duration">
              <h1 class="summary-count">5.753<span>S</span></h1>
              <h4 class="summary-label">S</h4>
            </div>
            <div class="summary-col summary-suites" title="Suites">
              <h1 class="summary-count">36</h1>
              <h4 class="summary-label">Suites</h4>
            </div>
            <div class="summary-col summary-tests" title="Tests">
              <h1 class="summary-count">119</h1>
              <h4 class="summary-label">Tests</h4>
            </div>
            <div class="summary-col summary-passes" data-filter="passed" title="Passed">
              <h1 class="summary-count">119</h1>
              <h4 class="summary-label">Passed</h4>
            </div>
            <div class="summary-col summary-failures" data-filter="failed" title="Failed">
              <h1 class="summary-count">0</h1>
              <h4 class="summary-label">Failed</h4>
            </div>
            <div class="summary-col summary-pending" data-filter="pending" title="Pending">
              <h1 class="summary-count">0</h1>
              <h4 class="summary-label">Pending</h4>
            </div>
          </div>      </div>
    </div>
    <div class="statusbar">
      <div class="container">
          <div class="row">
            <div class="status-item status-item-pending-pct">0% Pending</div>
            <div class="status-item status-item-passing-pct success">100% Passing</div>
          </div>      </div>
    </div>

    <!-- Suites -->
    <div class="details container">
            <section class="suite-wrap">
          <div id="288955ac-e3d6-4be9-8a61-108b1a1fb7df" class="suite has-suites">
            <h3 class="suite-title">Buzzer server</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
        
              <section class="suite-wrap">
          <div id="b3990def-0447-4de8-a2e7-42cac8d39ee1" class="suite has-suites">
            <h3 class="suite-title">contestant</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
        
              <section class="suite-wrap">
          <div id="e872c8d2-f170-4ed1-a784-c814474e384b" class="suite has-suites">
            <h3 class="suite-title">join</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
        
              <section class="suite-wrap">
          <div id="b957e290-e3f2-4fe4-8431-a02ffe29038f" class="suite has-tests has-passed">
            <h3 class="suite-title">as individual</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="b957e290-e3f2-4fe4-8431-a02ffe29038f" class="suite-chart" width="50" height="50" data-total-passes="8" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">610 ms</li>
                <li class="suite-summary-item tests">8</li>
                <li class="suite-summary-item passed">8</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#b957e290-e3f2-4fe4-8431-a02ffe29038f-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="b957e290-e3f2-4fe4-8431-a02ffe29038f-test-list" class="list-group test-list collapse in">
                    <div id="43a04fdc-154b-4ce9-b8a6-d9a13fdb7e71" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#43a04fdc-154b-4ce9-b8a6-d9a13fdb7e71 > .test-code.collapse">Code</button>
              <span class="test-duration slow">209 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.true();<br>        rm.contestantId.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="41113f18-c221-4125-9cad-63c087b684bb" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#41113f18-c221-4125-9cad-63c087b684bb > .test-code.collapse">Code</button>
              <span class="test-duration medium">49 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        om.should.not.be.null();<br>        om.gameState.contestants.length.should.equal(<span class="hljs-number">1</span>);<br>        om.gameState.contestants[<span class="hljs-number">0</span>].username.should.equal(<span class="hljs-string">'Test Person'</span>);<br>        done();<br>    });<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'Test Person'</span>, rm.sessionId);<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="3571bfd5-21f8-4090-8410-9b9c63fa7f5d" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is full
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#3571bfd5-21f8-4090-8410-9b9c63fa7f5d > .test-code.collapse">Code</button>
              <span class="test-duration slow">85 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">responseMessage</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rm1 = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rm1.sessionId = responseMessage.sessionId;<br>    rm1.username = <span class="hljs-string">'TP1'</span>;<br>    <span class="hljs-keyword">var</span> rm2 = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rm2.sessionId = responseMessage.sessionId;<br>    rm2.username = <span class="hljs-string">'TP2'</span>;<br>    <span class="hljs-comment">// Contestant 1 join</span><br>    cc1.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rm1, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m1</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm1 = messageFactory.restore(m1, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm1.wasSuccessful.should.be.true();<br>        <span class="hljs-comment">// Contestant 2 join</span><br>        cc2.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rm2, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m2</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm2 = messageFactory.restore(m2, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            rm2.wasSuccessful.should.be.false();<br>            rm2.failedRequestReason.should.equal(constants.messages.MAXIMUM_SESSION_SIZED_REACHED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="1378901f-e034-45fd-b5eb-5d0b103c027b" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should subscribe contestant to contestant room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#1378901f-e034-45fd-b5eb-5d0b103c027b > .test-code.collapse">Code</button>
              <span class="test-duration medium">59 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    <span class="hljs-comment">// listen for Contestant update</span><br>    cc.on(<span class="hljs-string">'testMessage'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        m.should.equal(<span class="hljs-string">'test'</span>);<br>        done();<br>    });<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.true();<br>        helper.sendMessageToContestants(sessionId, <span class="hljs-string">'testMessage'</span>, <span class="hljs-string">'test'</span>);<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="33c89475-728c-41a3-b578-7c4f02095d5a" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should subscribe contestant to observer room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#33c89475-728c-41a3-b578-7c4f02095d5a > .test-code.collapse">Code</button>
              <span class="test-duration medium">47 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    <span class="hljs-comment">// listen for observer update</span><br>    cc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-comment">// Hack: this event may fire twice</span><br>        helper.closeClients();<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        om.should.not.be.null();<br>        done();<br>    });<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.true();<br>        helper.forceObserveUpdate(sessionId);<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="2d024e85-11fa-4dac-879e-749a79739e77" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#2d024e85-11fa-4dac-879e-749a79739e77 > .test-code.collapse">Code</button>
              <span class="test-duration medium">51 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = idUtility.generateSessionId();<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.false();<br>        rm.failedRequestReason.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="deda5e39-f1d3-47f7-b7e4-056386f63355" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#deda5e39-f1d3-47f7-b7e4-056386f63355 > .test-code.collapse">Code</button>
              <span class="test-duration medium">44 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.getLatestSession().complete();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.false();<br>        rm.failedRequestReason.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="7a96f7a5-4975-451c-8b99-ef03ed3f6fe6" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when username is taken
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#7a96f7a5-4975-451c-8b99-ef03ed3f6fe6 > .test-code.collapse">Code</button>
              <span class="test-duration medium">66 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">2</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    helper.contestantJoin(cc1, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>        <span class="hljs-comment">// Join</span><br>        <span class="hljs-keyword">var</span> rm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>        rm.sessionId = sessionId;<br>        rm.username = <span class="hljs-string">'username'</span>;<br>        cc2.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) </span>{<br>            <span class="hljs-keyword">var</span> responseMessage = messageFactory.restore(message, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            responseMessage.should.not.be.null();<br>            responseMessage.wasSuccessful.should.be.false();<br>            responseMessage.failedRequestReason.should.equal(constants.messages.USERNAME_TAKEN);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="4b910c5b-11a3-4395-a02d-6e4298dd14e8" class="suite has-suites has-tests has-passed">
            <h3 class="suite-title">with teams</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="4b910c5b-11a3-4395-a02d-6e4298dd14e8" class="suite-chart" width="50" height="50" data-total-passes="10" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">476 ms</li>
                <li class="suite-summary-item tests">10</li>
                <li class="suite-summary-item passed">10</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#4b910c5b-11a3-4395-a02d-6e4298dd14e8-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="4b910c5b-11a3-4395-a02d-6e4298dd14e8-test-list" class="list-group test-list collapse in">
                    <div id="abd3b333-b700-4ba7-86d9-dc02f3e3bb4f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#abd3b333-b700-4ba7-86d9-dc02f3e3bb4f > .test-code.collapse">Code</button>
              <span class="test-duration medium">46 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.true();<br>        rm.contestantId.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="305fde8f-7229-43cf-9094-6cbe01528602" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#305fde8f-7229-43cf-9094-6cbe01528602 > .test-code.collapse">Code</button>
              <span class="test-duration medium">52 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        om.should.not.be.null();<br>        om.gameState.contestants.length.should.equal(<span class="hljs-number">1</span>);<br>        om.gameState.contestants[<span class="hljs-number">0</span>].username.should.equal(<span class="hljs-string">'Test Person'</span>);<br>        om.gameState.teams.length.should.equal(<span class="hljs-number">1</span>);<br>        om.gameState.teams[<span class="hljs-number">0</span>].contestants.length.should.equal(<span class="hljs-number">1</span>);<br>        om.gameState.teams[<span class="hljs-number">0</span>].contestants[<span class="hljs-number">0</span>].username.should.equal(<span class="hljs-string">'Test Person'</span>);<br>        done();<br>    });<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'Test Person'</span>, rm.sessionId);<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="f8ffa669-ca25-4be3-9d11-658fd20db50f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is full
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#f8ffa669-ca25-4be3-9d11-658fd20db50f > .test-code.collapse">Code</button>
              <span class="test-duration medium">61 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">responseMessage</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rm1 = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rm1.sessionId = responseMessage.sessionId;<br>    rm1.username = <span class="hljs-string">'TP1'</span>;<br>    <span class="hljs-keyword">var</span> rm2 = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rm2.sessionId = responseMessage.sessionId;<br>    rm2.username = <span class="hljs-string">'TP2'</span>;<br>    <span class="hljs-comment">// Contestant 1 join</span><br>    cc1.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rm1, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m1</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm1 = messageFactory.restore(m1, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm1.wasSuccessful.should.be.true();<br>        <span class="hljs-comment">// Contestant 2 join</span><br>        cc2.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rm2, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m2</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm2 = messageFactory.restore(m2, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            rm2.wasSuccessful.should.be.false();<br>            rm2.failedRequestReason.should.equal(constants.messages.TEAMS_ARE_FULL);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="5389d489-3577-416c-aa48-bd4f56d72968" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should subscribe contestant to contestant room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#5389d489-3577-416c-aa48-bd4f56d72968 > .test-code.collapse">Code</button>
              <span class="test-duration medium">42 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    <span class="hljs-comment">// listen for Contestant update</span><br>    cc.on(<span class="hljs-string">'testMessage'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        m.should.equal(<span class="hljs-string">'test'</span>);<br>        done();<br>    });<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.true();<br>        helper.sendMessageToContestants(sessionId, <span class="hljs-string">'testMessage'</span>, <span class="hljs-string">'test'</span>);<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="452546c2-2f32-47af-974f-e85ab2b53432" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should subscribe contestant to observer room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#452546c2-2f32-47af-974f-e85ab2b53432 > .test-code.collapse">Code</button>
              <span class="test-duration medium">58 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    <span class="hljs-comment">// listen for observer update</span><br>    cc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-comment">// Hack: this event may fire twice</span><br>        helper.closeClients();<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        om.should.not.be.null();<br>        done();<br>    });<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.true();<br>        helper.forceObserveUpdate(sessionId);<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="de89e25f-5e8a-402d-8fc8-426f4e95b18e" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#de89e25f-5e8a-402d-8fc8-426f4e95b18e > .test-code.collapse">Code</button>
              <span class="test-duration fast">29 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = idUtility.generateSessionId();<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.false();<br>        rm.failedRequestReason.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="56b6ba63-523c-4e5c-9551-e8028a66d46d" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#56b6ba63-523c-4e5c-9551-e8028a66d46d > .test-code.collapse">Code</button>
              <span class="test-duration medium">42 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.getLatestSession().complete();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.false();<br>        rm.failedRequestReason.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="540395dd-08b8-412c-8806-54ea7c60b73c" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when username is taken
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#540395dd-08b8-412c-8806-54ea7c60b73c > .test-code.collapse">Code</button>
              <span class="test-duration medium">73 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    helper.contestantJoin(cc1, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>        <span class="hljs-comment">// Join</span><br>        <span class="hljs-keyword">var</span> rm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>        rm.sessionId = sessionId;<br>        rm.username = <span class="hljs-string">'username'</span>;<br>        cc2.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) </span>{<br>            <span class="hljs-keyword">var</span> responseMessage = messageFactory.restore(message, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            responseMessage.should.not.be.null();<br>            responseMessage.wasSuccessful.should.be.false();<br>            responseMessage.failedRequestReason.should.equal(constants.messages.USERNAME_TAKEN);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="906f9488-3cf5-44d6-90bd-8581cfe24462" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should inquire about team leader position
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#906f9488-3cf5-44d6-90bd-8581cfe24462 > .test-code.collapse">Code</button>
              <span class="test-duration fast">35 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="4553fba8-95f1-432e-a2ab-1d2c6a496ce0" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not inquire about team leader position
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#4553fba8-95f1-432e-a2ab-1d2c6a496ce0 > .test-code.collapse">Code</button>
              <span class="test-duration medium">38 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.false();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
              <section class="suite-wrap">
          <div id="482c454a-d5eb-47fb-8faf-5c39a2ab93f4" class="suite has-tests has-passed">
            <h3 class="suite-title">when team leader selection method is RANDOM</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="482c454a-d5eb-47fb-8faf-5c39a2ab93f4" class="suite-chart" width="50" height="50" data-total-passes="2" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">121 ms</li>
                <li class="suite-summary-item tests">2</li>
                <li class="suite-summary-item passed">2</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#482c454a-d5eb-47fb-8faf-5c39a2ab93f4-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="482c454a-d5eb-47fb-8faf-5c39a2ab93f4-test-list" class="list-group test-list collapse in">
                    <div id="d4802b17-4f07-4755-8425-e83c7c9b527e" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should fulfill team leader position when team is full
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#d4802b17-4f07-4755-8425-e83c7c9b527e > .test-code.collapse">Code</button>
              <span class="test-duration medium">64 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>    helper.contestantJoin(cc1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(cc2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> t = s.teams.all[<span class="hljs-number">0</span>];<br>            t.teamLeader.username.should.equalOneOf(<span class="hljs-string">'c1'</span>, <span class="hljs-string">'c2'</span>);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="0a3892f4-7ca0-4c2e-8bf1-ebb9d53ad1f4" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not fulfill team leader position when team is not full
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#0a3892f4-7ca0-4c2e-8bf1-ebb9d53ad1f4 > .test-code.collapse">Code</button>
              <span class="test-duration medium">57 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">3</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>    helper.contestantJoin(cc1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(cc2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> t = s.teams.all[<span class="hljs-number">0</span>];<br>            should(t.teamLeader).be.null();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="d840e860-2188-4136-82d1-21a63454dd56" class="suite has-tests has-passed">
            <h3 class="suite-title">when team selection method is PLAYER_CHOICE</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="d840e860-2188-4136-82d1-21a63454dd56" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">239 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#d840e860-2188-4136-82d1-21a63454dd56-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="d840e860-2188-4136-82d1-21a63454dd56-test-list" class="list-group test-list collapse in">
                    <div id="5741a984-24e2-40e9-ad84-73b98f1cc7de" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should respond with a list of teams
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#5741a984-24e2-40e9-ad84-73b98f1cc7de > .test-code.collapse">Code</button>
              <span class="test-duration fast">37 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">3</span>;<br>s.teamSize = <span class="hljs-number">3</span>;<br>s.teamSelectionMethod = constants.teamSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.wasSuccessful.should.be.false();<br>        rm.mustChooseTeam.should.be.true();<br>        rm.teams.should.be.Array();<br>        rm.teams.length.should.equal(<span class="hljs-number">3</span>);<br>        helper.getLatestSession().contestants.length.should.equal(<span class="hljs-number">0</span>);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="1322c412-e0df-4615-b309-3c3fbf4d1eb6" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should all when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#1322c412-e0df-4615-b309-3c3fbf4d1eb6 > .test-code.collapse">Code</button>
              <span class="test-duration medium">57 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">3</span>;<br>s.teamSize = <span class="hljs-number">3</span>;<br>s.teamSelectionMethod = constants.teamSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.wasSuccessful.should.be.false();<br>        rqm.teamName = rm.teams[<span class="hljs-number">1</span>];<br>        cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            rm.wasSuccessful.should.be.true();<br>            should(rm.contestantId).not.be.null();<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> t = session.teams.getByTeamName(rqm.teamName);<br>            t.contestants.length.should.equal(<span class="hljs-number">1</span>);<br>            t.contestants.all[<span class="hljs-number">0</span>].id.should.equal(rm.contestantId);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="6b0af377-4cc4-49be-8fe1-aa0a7c279e17" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not over fill a team
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#6b0af377-4cc4-49be-8fe1-aa0a7c279e17 > .test-code.collapse">Code</button>
              <span class="test-duration slow">145 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">2</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamSelectionMethod = constants.teamSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.wasSuccessful.should.be.false();<br>        rqm.teamName = rm.teams[<span class="hljs-number">1</span>];<br>        <span class="hljs-comment">// Fill the spot</span><br>        <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>        <span class="hljs-keyword">var</span> rqm2 = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>        rqm2.sessionId = sessionId;<br>        rqm2.username = <span class="hljs-string">'Test Person2'</span>;<br>        rqm2.teamName = rqm.teamName;<br>        cc2.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm2, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            rm.wasSuccessful.should.be.true();<br>            <span class="hljs-comment">// Try join full team</span><br>            cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>                rm.wasSuccessful.should.be.false();<br>                rm.failedRequestReason.should.equal(constants.messages.TEAMS_ARE_FULL);<br>                done();<br>            });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="5f5a3144-d1df-4522-a07d-ce3437e44e83" class="suite has-tests has-passed">
            <h3 class="suite-title">rejoin</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="5f5a3144-d1df-4522-a07d-ce3437e44e83" class="suite-chart" width="50" height="50" data-total-passes="4" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">247 ms</li>
                <li class="suite-summary-item tests">4</li>
                <li class="suite-summary-item passed">4</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#5f5a3144-d1df-4522-a07d-ce3437e44e83-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="5f5a3144-d1df-4522-a07d-ce3437e44e83-test-list" class="list-group test-list collapse in">
                    <div id="6a8c520e-4501-4198-b4b7-cea7f9dbddaa" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid and subscribe contestant to the observer room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#6a8c520e-4501-4198-b4b7-cea7f9dbddaa > .test-code.collapse">Code</button>
              <span class="test-duration medium">48 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    helper.contestantJoin(cc, <span class="hljs-string">'test user'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        cc.disconnect();<br>        cc = helper.createClient();<br>        <span class="hljs-comment">// listen for observer update</span><br>        cc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-comment">// Hack: this event may fire twice</span><br>            helper.closeClients();<br>            <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>            om.should.not.be.null();<br>            done();<br>        });<br>        <span class="hljs-comment">// Rejoin</span><br>        <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>        rqm.sessionId = sessionId;<br>        rqm.participantId = contestantId;<br>        rqm.rejoinAs = constants.rejoinAs.CONTESTANT;<br>        cc.emit(messageConstants.REJOIN_SESSION, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="25cf05f9-1296-468b-b815-524aa5bc6fd4" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#25cf05f9-1296-468b-b815-524aa5bc6fd4 > .test-code.collapse">Code</button>
              <span class="test-duration medium">49 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    helper.contestantJoin(cc, <span class="hljs-string">'test user'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        cc.disconnect();<br>        cc = helper.createClient();<br>        <span class="hljs-comment">// Rejoin</span><br>        <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>        rqm.sessionId = idUtility.generateSessionId();<br>        rqm.participantId = contestantId;<br>        rqm.rejoinAs = constants.rejoinAs.CONTESTANT;<br>        cc.emit(messageConstants.REJOIN_SESSION, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="870d8962-d0ab-4fad-8bab-bebb8dee4330" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#870d8962-d0ab-4fad-8bab-bebb8dee4330 > .test-code.collapse">Code</button>
              <span class="test-duration slow">80 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    helper.contestantJoin(cc, <span class="hljs-string">'test user'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        cc.disconnect();<br>        cc = helper.createClient();<br>        <span class="hljs-comment">// Rejoin</span><br>        <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>        rqm.sessionId = sessionId;<br>        rqm.participantId = contestantId;<br>        rqm.rejoinAs = constants.rejoinAs.CONTESTANT;<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.complete();<br>        cc.emit(messageConstants.REJOIN_SESSION, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="06366aad-8000-49b3-b4f2-2649e36edeb7" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should flag host as not disconnected
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#06366aad-8000-49b3-b4f2-2649e36edeb7 > .test-code.collapse">Code</button>
              <span class="test-duration medium">70 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    helper.contestantJoin(cc, <span class="hljs-string">'test user'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        cc.disconnect();<br>        cc = helper.createClient();<br>        <span class="hljs-comment">// Rejoin</span><br>        <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>        rqm.sessionId = sessionId;<br>        rqm.participantId = contestantId;<br>        rqm.rejoinAs = constants.rejoinAs.CONTESTANT;<br>        cc.emit(messageConstants.REJOIN_SESSION, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> c = session.contestants.find(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>) </span>{<br>                <span class="hljs-keyword">return</span> c.id === contestantId;<br>            });<br>            c.isDisconnected.should.be.false();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="c6303f04-e7f5-4043-b4f8-4f463fac4bf9" class="suite has-tests has-passed">
            <h3 class="suite-title">on disconnect</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="c6303f04-e7f5-4043-b4f8-4f463fac4bf9" class="suite-chart" width="50" height="50" data-total-passes="1" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">47 ms</li>
                <li class="suite-summary-item tests">1</li>
                <li class="suite-summary-item passed">1</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#c6303f04-e7f5-4043-b4f8-4f463fac4bf9-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="c6303f04-e7f5-4043-b4f8-4f463fac4bf9-test-list" class="list-group test-list collapse in">
                    <div id="fc05f137-f7fa-40a9-b2d4-c347bf23f0c7" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#fc05f137-f7fa-40a9-b2d4-c347bf23f0c7 > .test-code.collapse">Code</button>
              <span class="test-duration medium">47 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        <span class="hljs-keyword">if</span> (om.gameState.contestants.length &gt; <span class="hljs-number">0</span> &amp;&amp; om.gameState.contestants[<span class="hljs-number">0</span>].disconnected) {<br>            done();<br>        }<br>    });<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'test user'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        cc.disconnect();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="0c8a17cf-ef3c-43cf-852c-def7874be811" class="suite has-tests has-passed">
            <h3 class="suite-title">team leader inquiry response</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="0c8a17cf-ef3c-43cf-852c-def7874be811" class="suite-chart" width="50" height="50" data-total-passes="6" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">259 ms</li>
                <li class="suite-summary-item tests">6</li>
                <li class="suite-summary-item passed">6</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#0c8a17cf-ef3c-43cf-852c-def7874be811-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="0c8a17cf-ef3c-43cf-852c-def7874be811-test-list" class="list-group test-list collapse in">
                    <div id="d7e796ba-48eb-4a9b-81ac-33699b03e2d4" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should set team leader
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#d7e796ba-48eb-4a9b-81ac-33699b03e2d4 > .test-code.collapse">Code</button>
              <span class="test-duration medium">45 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        rqm = messageFactory.create(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE);<br>        rqm.sessionId = sessionId;<br>        rqm.contestantId = rm.contestantId;<br>        rqm.decision = <span class="hljs-literal">true</span>;<br>        cc.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> t = s.teams.all[<span class="hljs-number">0</span>];<br>            t.teamLeader.username.should.equal(<span class="hljs-string">'Test Person'</span>);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="7c449d3d-4eeb-4c64-9131-de533028b261" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not set team leader
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#7c449d3d-4eeb-4c64-9131-de533028b261 > .test-code.collapse">Code</button>
              <span class="test-duration medium">44 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        rqm = messageFactory.create(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE);<br>        rqm.sessionId = sessionId;<br>        rqm.contestantId = rm.contestantId;<br>        rqm.decision = <span class="hljs-literal">false</span>;<br>        cc.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> t = s.teams.all[<span class="hljs-number">0</span>];<br>            should(t.teamLeader).be.null();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="d6591798-065e-4bd2-ad03-709062e1120f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#d6591798-065e-4bd2-ad03-709062e1120f > .test-code.collapse">Code</button>
              <span class="test-duration fast">36 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        rqm = messageFactory.create(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE);<br>        rqm.sessionId = idUtility.generateSessionId();<br>        rqm.contestantId = rm.contestantId;<br>        rqm.decision = <span class="hljs-literal">true</span>;<br>        cc.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>            rm.should.not.be.null();<br>            rm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="0d261223-fd76-463b-ad61-af6405379890" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#0d261223-fd76-463b-ad61-af6405379890 > .test-code.collapse">Code</button>
              <span class="test-duration fast">36 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        rqm = messageFactory.create(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE);<br>        rqm.sessionId = sessionId;<br>        rqm.contestantId = rm.contestantId;<br>        rqm.decision = <span class="hljs-literal">true</span>;<br>        helper.getLatestSession().complete();<br>        cc.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>            rm.should.not.be.null();<br>            rm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="13ed6916-d795-4180-93e7-efdcf6d13a3f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when contestant does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#13ed6916-d795-4180-93e7-efdcf6d13a3f > .test-code.collapse">Code</button>
              <span class="test-duration fast">32 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        rqm = messageFactory.create(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE);<br>        rqm.sessionId = sessionId;<br>        rqm.contestantId = idUtility.generateParticipantId();<br>        rqm.decision = <span class="hljs-literal">true</span>;<br>        cc.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_LEADER_RESPONSE_NOT_CONTESTANT);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="b40538ae-4ac6-4202-8a20-50c5688cc24e" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not set team leader when position fulfilled (aka race condition)
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#b40538ae-4ac6-4202-8a20-50c5688cc24e > .test-code.collapse">Code</button>
              <span class="test-duration medium">66 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc1.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        <span class="hljs-keyword">var</span> cc1Id = rm.contestantId;<br>        helper.contestantJoin(cc2, <span class="hljs-string">'Test Person2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            rm.enquireForTeamLeaderPosition.should.be.true();<br>            rqm = messageFactory.create(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE);<br>            rqm.sessionId = sessionId;<br>            rqm.contestantId = rm.contestantId;<br>            rqm.decision = <span class="hljs-literal">true</span>;<br>            cc2.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>                sm.should.not.be.null();<br>                rqm.contestantId = cc1Id;<br>                cc1.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.COULD_NOT_PROMOTE_TO_TEAM_LEADER_POSITION_FULFILLED);<br>                    done();<br>                });<br>            });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="40b36711-36ba-4520-9f38-a5f588961772" class="suite has-tests has-passed">
            <h3 class="suite-title">buzzerPress</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="40b36711-36ba-4520-9f38-a5f588961772" class="suite-chart" width="50" height="50" data-total-passes="5" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">205 ms</li>
                <li class="suite-summary-item tests">5</li>
                <li class="suite-summary-item passed">5</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#40b36711-36ba-4520-9f38-a5f588961772-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="40b36711-36ba-4520-9f38-a5f588961772-test-list" class="list-group test-list collapse in">
                    <div id="92855185-8062-4e95-82cd-5aa20cb14728" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when state is ready
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#92855185-8062-4e95-82cd-5aa20cb14728 > .test-code.collapse">Code</button>
              <span class="test-duration fast">34 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="0e93a867-5940-4115-85b4-5ec57d6616a6" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should ignore when state is not ready
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#0e93a867-5940-4115-85b4-5ec57d6616a6 > .test-code.collapse">Code</button>
              <span class="test-duration medium">56 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">2</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    helper.contestantJoin(cc1, <span class="hljs-string">'username1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc1.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>            helper.contestantJoin(cc2, <span class="hljs-string">'username2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>                bpm.sessionId = sessionId;<br>                bpm.contestantId = rm.contestantId;<br>                cc1.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.BUZZER_PRESS_NOT_ACCEPTED);<br>                    done();<br>                });<br>            });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="2eb12e75-92ff-41de-8fa2-30949220eb73" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#2eb12e75-92ff-41de-8fa2-30949220eb73 > .test-code.collapse">Code</button>
              <span class="test-duration fast">37 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        helper.getLatestSession().complete();<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.ERROR);<br>            sm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="608f9ed4-9fe7-4a55-a16a-61bb60371572" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#608f9ed4-9fe7-4a55-a16a-61bb60371572 > .test-code.collapse">Code</button>
              <span class="test-duration fast">35 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = idUtility.generateSessionId();<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.ERROR);<br>            sm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="c5853848-360e-4f04-a23a-6dadfcce2dba" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when contestant does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#c5853848-360e-4f04-a23a-6dadfcce2dba > .test-code.collapse">Code</button>
              <span class="test-duration medium">43 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = idUtility.generateParticipantId();<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.ERROR);<br>            sm.error.should.equal(constants.messages.COULD_NOT_ACCEPT_BUZZER_PRESS_NOT_CONTESTANT);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="b4c43061-5821-49c9-8788-74b717344177" class="suite has-tests has-passed">
            <h3 class="suite-title">team name change request</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="b4c43061-5821-49c9-8788-74b717344177" class="suite-chart" width="50" height="50" data-total-passes="10" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">362 ms</li>
                <li class="suite-summary-item tests">10</li>
                <li class="suite-summary-item passed">10</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#b4c43061-5821-49c9-8788-74b717344177-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="b4c43061-5821-49c9-8788-74b717344177-test-list" class="list-group test-list collapse in">
                    <div id="2a43cd9f-f34a-419e-a37a-e8035d2dbfca" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#2a43cd9f-f34a-419e-a37a-e8035d2dbfca > .test-code.collapse">Code</button>
              <span class="test-duration medium">40 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            session.teams.all[<span class="hljs-number">0</span>].teamName.should.equal(<span class="hljs-string">'New team name'</span>);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="cd3c04dc-c614-4d9c-9c0e-bc147dd3f2a9" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when team name is already used
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#cd3c04dc-c614-4d9c-9c0e-bc147dd3f2a9 > .test-code.collapse">Code</button>
              <span class="test-duration fast">35 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">2</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        <span class="hljs-keyword">var</span> contestant = session.contestants[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">var</span> team = session.teams.getByContestant(contestant);<br>        <span class="hljs-keyword">var</span> otherTeam = session.teams.all.filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>) </span>{<br>            <span class="hljs-keyword">return</span> t !== team;<br>        })[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = otherTeam.teamName;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_NAME_IN_USE);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="b1780ca3-257b-4e53-8c67-e22410454e49" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it when team name does not change
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#b1780ca3-257b-4e53-8c67-e22410454e49 > .test-code.collapse">Code</button>
              <span class="test-duration medium">43 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        <span class="hljs-keyword">var</span> contestant = session.contestants[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">var</span> team = session.teams.getByContestant(contestant);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = team.teamName;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="556a24a5-16fd-45bb-beff-6a204d9e0330" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when not team leader
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#556a24a5-16fd-45bb-beff-6a204d9e0330 > .test-code.collapse">Code</button>
              <span class="test-duration fast">33 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_NAME_REQUEST_NOT_CONTESTANT_TEAM_OR_TEAM_LEADER);<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            session.teams.all[<span class="hljs-number">0</span>].teamName.should.not.equal(<span class="hljs-string">'New team name'</span>);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="ddd355e4-966f-474c-b148-5a0f03f1e13a" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#ddd355e4-966f-474c-b148-5a0f03f1e13a > .test-code.collapse">Code</button>
              <span class="test-duration fast">32 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = idUtility.generateSessionId();<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="727a06fa-d35d-4533-a7af-86cdcb17f06c" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when contestant does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#727a06fa-d35d-4533-a7af-86cdcb17f06c > .test-code.collapse">Code</button>
              <span class="test-duration fast">32 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = idUtility.generateParticipantId();<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_NAME_REQUEST_NOT_CONTESTANT_TEAM_OR_TEAM_LEADER);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="b45180d6-2bb1-4ce9-820e-bf2156b28c49" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session is complete
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#b45180d6-2bb1-4ce9-820e-bf2156b28c49 > .test-code.collapse">Code</button>
              <span class="test-duration medium">44 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.complete();<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="751d90a4-c598-43f5-8dfe-bf09455510b5" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when setting do not allow it
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#751d90a4-c598-43f5-8dfe-bf09455510b5 > .test-code.collapse">Code</button>
              <span class="test-duration fast">34 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.MANUAL;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_NAME_SETTINGS_NOT_ALLOW);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="c633f235-f1fc-43db-bc12-179cff9c81ec" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when team name contains profanity
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#c633f235-f1fc-43db-bc12-179cff9c81ec > .test-code.collapse">Code</button>
              <span class="test-duration fast">32 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'The word penis is funny #YOLO'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_NAME_CONTAINS_PROFANITY);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="b49eecb3-224f-42df-94a3-e3e9654e5917" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers when accepted
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#b49eecb3-224f-42df-94a3-e3e9654e5917 > .test-code.collapse">Code</button>
              <span class="test-duration fast">37 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        <span class="hljs-keyword">if</span> (om.gameState.teams &amp;&amp; om.gameState.teams.length) {<br>            <span class="hljs-keyword">if</span> (om.gameState.teams[<span class="hljs-number">0</span>].teamName === <span class="hljs-string">'New team name'</span>) {<br>                done();<br>            }<br>        }<br>    });<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="59546da7-1137-473c-bc8d-615bc6ed916d" class="suite has-tests has-passed">
            <h3 class="suite-title">info request</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="59546da7-1137-473c-bc8d-615bc6ed916d" class="suite-chart" width="50" height="50" data-total-passes="5" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">184 ms</li>
                <li class="suite-summary-item tests">5</li>
                <li class="suite-summary-item passed">5</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#59546da7-1137-473c-bc8d-615bc6ed916d-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="59546da7-1137-473c-bc8d-615bc6ed916d-test-list" class="list-group test-list collapse in">
                    <div id="2e5d23fc-b339-4b97-a9e6-8c4dec8bdb42" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should return in a valid state for individuals contestant
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#2e5d23fc-b339-4b97-a9e6-8c4dec8bdb42 > .test-code.collapse">Code</button>
              <span class="test-duration fast">37 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.participantId = contestantId;<br>        cc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> irm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>            irm.should.not.be.null();<br>            should(irm.info).not.be.null();<br>            should(irm.info.host).be.null();<br>            should(irm.info.contestant).not.be.null();<br>            should(irm.info.team).be.null();<br>            should(irm.info.session).not.be.null();<br>            should(irm.info.sessionState).be.equal(<span class="hljs-string">'ready'</span>);<br>            should(irm.info.isObserver).be.false();<br>            should(irm.info.isHost).be.false();<br>            should(irm.info.isContestant).be.true();<br>            should(irm.info.isSessionCompleted).be.false();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="8f5642d2-c7e3-4d48-9dfe-a294b19c7a38" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should return in a valid state for teams contestant
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#8f5642d2-c7e3-4d48-9dfe-a294b19c7a38 > .test-code.collapse">Code</button>
              <span class="test-duration fast">34 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">3</span>;<br>s.teamSize = <span class="hljs-number">3</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.participantId = contestantId;<br>        cc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>            rm.should.not.be.null();<br>            should(rm.info).not.be.null();<br>            should(rm.info.host).be.null();<br>            should(rm.info.contestant).not.be.null();<br>            should(rm.info.team).not.be.null();<br>            should(rm.info.session).not.be.null();<br>            should(rm.info.sessionState).be.equal(<span class="hljs-string">'ready'</span>);<br>            should(rm.info.isObserver).be.false();<br>            should(rm.info.isHost).be.false();<br>            should(rm.info.isContestant).be.true();<br>            should(rm.info.isSessionCompleted).be.false();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="eebb18a3-d5ab-4e20-9158-1afd3672ebe2" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#eebb18a3-d5ab-4e20-9158-1afd3672ebe2 > .test-code.collapse">Code</button>
              <span class="test-duration medium">46 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>        req.sessionId = idUtility.generateSessionId();<br>        req.participantId = contestantId;<br>        cc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>            em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="f4dfb8dc-b5a8-413d-9ec8-487ff5503eda" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when contestant does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#f4dfb8dc-b5a8-413d-9ec8-487ff5503eda > .test-code.collapse">Code</button>
              <span class="test-duration fast">29 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.participantId = idUtility.generateParticipantId();<br>        cc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>            em.error.should.equal(constants.messages.COULD_NOT_PROCESS_REQUEST_CONTESTANT_OR_HOST_NOT_FOUND);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="6c291fef-866f-4797-93e2-458d35ec0bc2" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when session is complete
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#6c291fef-866f-4797-93e2-458d35ec0bc2 > .test-code.collapse">Code</button>
              <span class="test-duration medium">38 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.participantId = contestantId;<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.complete();<br>        cc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> irm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>            irm.should.not.be.null();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
        
          </div>
        </section>
            <section class="suite-wrap">
          <div id="f783cf37-3959-4b09-8d34-5907d7e2bc2a" class="suite has-suites">
            <h3 class="suite-title">Buzzer server</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
        
              <section class="suite-wrap">
          <div id="bb7f6287-30ae-47e4-ad76-6c014b5b4489" class="suite has-suites">
            <h3 class="suite-title">host</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
        
              <section class="suite-wrap">
          <div id="2f41f52c-6244-450c-95c5-df3697a56aea" class="suite has-suites">
            <h3 class="suite-title">create</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
        
              <section class="suite-wrap">
          <div id="8e7f952b-1c03-456d-9259-d675a507adb0" class="suite has-tests has-passed">
            <h3 class="suite-title">session</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="8e7f952b-1c03-456d-9259-d675a507adb0" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">48 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#8e7f952b-1c03-456d-9259-d675a507adb0-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="8e7f952b-1c03-456d-9259-d675a507adb0-test-list" class="list-group test-list collapse in">
                    <div id="27a207b1-6334-4319-a595-44dc58845215" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid and create a session
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#27a207b1-6334-4319-a595-44dc58845215 > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> csm = messageFactory.create(messageConstants.CREATE_SESSION);<br>csm.settings = s;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>c.emit(messageConstants.CREATE_SESSION, csm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>    m.should.be.Object();<br>    m.type.should.equal(messageConstants.CREATE_SESSION_RESPONSE);<br>    helper.sessions.all.length.should.equal(<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    session.complete();<br>    <span class="hljs-keyword">var</span> rsm = messageFactory.restore(m, messageConstants.CREATE_SESSION_RESPONSE);<br>    rsm.sessionId.should.equal(session.id);<br>    rsm.hostId.should.equal(session.host.id);<br>    done();<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="bd81dc79-1e8b-4241-9b45-5186e350549b" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should subscribe host to the observer room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#bd81dc79-1e8b-4241-9b45-5186e350549b > .test-code.collapse">Code</button>
              <span class="test-duration fast">17 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br><span class="hljs-comment">// listen for observer update</span><br>c.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>    <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>    om.should.not.be.null();<br>    done();<br>});<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    rm.should.not.be.null();<br>    <span class="hljs-comment">// force observer update</span><br>    helper.forceObserveUpdate(rm.sessionId);<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="12c11a4c-b027-46cc-897d-fcc8ce57a356" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when settings are not valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#12c11a4c-b027-46cc-897d-fcc8ce57a356 > .test-code.collapse">Code</button>
              <span class="test-duration fast">13 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br><span class="hljs-keyword">var</span> [r, e] = s.validate();<br>r.should.be.false();<br><span class="hljs-keyword">var</span> csm = messageFactory.create(messageConstants.CREATE_SESSION);<br>csm.settings = s;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>c.emit(messageConstants.CREATE_SESSION, csm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>    m.should.be.Object();<br>    m.type.should.equal(messageConstants.ERROR);<br>    helper.sessions.all.length.should.equal(<span class="hljs-number">0</span>);<br>    done();<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="08c62227-73c6-4925-85f0-b9ba2e1b29cd" class="suite has-suites">
            <h3 class="suite-title">rejoin</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
        
              <section class="suite-wrap">
          <div id="5529af6d-1e5b-4836-863b-97ebd5611a78" class="suite has-tests has-passed">
            <h3 class="suite-title">session</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="5529af6d-1e5b-4836-863b-97ebd5611a78" class="suite-chart" width="50" height="50" data-total-passes="6" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">223 ms</li>
                <li class="suite-summary-item tests">6</li>
                <li class="suite-summary-item passed">6</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#5529af6d-1e5b-4836-863b-97ebd5611a78-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="5529af6d-1e5b-4836-863b-97ebd5611a78-test-list" class="list-group test-list collapse in">
                    <div id="06c8a173-954c-47ef-89a6-46d638de21b3" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#06c8a173-954c-47ef-89a6-46d638de21b3 > .test-code.collapse">Code</button>
              <span class="test-duration fast">27 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    c.disconnect();<br>    c = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = rm.sessionId;<br>    rjm.participantId = rm.hostId;<br>    rjm.rejoinAs = constants.rejoinAs.HOST;<br>    c.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{<br>        data.type.should.equal(messageConstants.SUCCESS);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="5d28dfb9-a442-40ef-8d1d-dbefec415427" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should subscribe host to observer room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#5d28dfb9-a442-40ef-8d1d-dbefec415427 > .test-code.collapse">Code</button>
              <span class="test-duration fast">31 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    c.disconnect();<br>    c = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = rm.sessionId;<br>    rjm.participantId = rm.hostId;<br>    rjm.rejoinAs = constants.rejoinAs.HOST;<br>    <span class="hljs-comment">// listen for observer update</span><br>    c.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        om.should.not.be.null();<br>        done();<br>    });<br>    c.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{<br>        data.type.should.equal(messageConstants.SUCCESS);<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="6e077825-8c6d-41d1-babf-ff9e19f2ec5f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when host id is invalid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#6e077825-8c6d-41d1-babf-ff9e19f2ec5f > .test-code.collapse">Code</button>
              <span class="test-duration fast">33 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    c.disconnect();<br>    c = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = rm.sessionId;<br>    rjm.participantId = idUtility.generateParticipantId();<br>    rjm.rejoinAs = constants.rejoinAs.HOST;<br>    c.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.COULD_NOT_REJOIN_NOT_HOST);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="b8e596ba-f9e3-4d1d-8793-7f1a6b0afff5" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#b8e596ba-f9e3-4d1d-8793-7f1a6b0afff5 > .test-code.collapse">Code</button>
              <span class="test-duration medium">55 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    c.disconnect();<br>    c = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = idUtility.generateSessionId();<br>    rjm.participantId = rm.hostId;<br>    rjm.rejoinAs = constants.rejoinAs.HOST;<br>    c.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>        rm.should.not.be.null();<br>        rm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="d663a023-40c8-44ee-a329-da01d1a89e80" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#d663a023-40c8-44ee-a329-da01d1a89e80 > .test-code.collapse">Code</button>
              <span class="test-duration medium">49 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    c.disconnect();<br>    c = helper.createClient();<br>    helper.getLatestSession().complete();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = rm.sessionId;<br>    rjm.participantId = rm.hostId;<br>    rjm.rejoinAs = constants.rejoinAs.HOST;<br>    c.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>        rm.should.not.be.null();<br>        rm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="77866aa5-73ae-494e-9ca1-d855a1047892" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should flag host as not disconnected
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#77866aa5-73ae-494e-9ca1-d855a1047892 > .test-code.collapse">Code</button>
              <span class="test-duration fast">28 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    c.disconnect();<br>    c = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = rm.sessionId;<br>    rjm.participantId = rm.hostId;<br>    rjm.rejoinAs = constants.rejoinAs.HOST;<br>    c.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{<br>        data.type.should.equal(messageConstants.SUCCESS);<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.host.isDisconnected.should.be.false();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="ea607766-f744-4033-b2fa-aa5c182e6e4f" class="suite has-suites">
            <h3 class="suite-title">complete</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
        
              <section class="suite-wrap">
          <div id="41afcc90-c577-4196-a468-b5364656a9db" class="suite has-tests has-passed">
            <h3 class="suite-title">session</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="41afcc90-c577-4196-a468-b5364656a9db" class="suite-chart" width="50" height="50" data-total-passes="5" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">103 ms</li>
                <li class="suite-summary-item tests">5</li>
                <li class="suite-summary-item passed">5</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#41afcc90-c577-4196-a468-b5364656a9db-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="41afcc90-c577-4196-a468-b5364656a9db-test-list" class="list-group test-list collapse in">
                    <div id="5207c1ad-66dd-4879-ac99-51000a455199" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#5207c1ad-66dd-4879-ac99-51000a455199 > .test-code.collapse">Code</button>
              <span class="test-duration fast">20 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> scm = messageFactory.create(messageConstants.SESSION_COMPLETE);<br>    scm.sessionId = rm.sessionId;<br>    scm.hostId = rm.hostId;<br>    hc.emit(messageConstants.SESSION_COMPLETE, scm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.SUCCESS);<br>        rm.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="3d8edb07-f484-474e-aabe-6b8553af8e7f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when host id is invalid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#3d8edb07-f484-474e-aabe-6b8553af8e7f > .test-code.collapse">Code</button>
              <span class="test-duration fast">22 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> scm = messageFactory.create(messageConstants.SESSION_COMPLETE);<br>    scm.sessionId = rm.sessionId;<br>    scm.hostId = idUtility.generateParticipantId();<br>    hc.emit(messageConstants.SESSION_COMPLETE, scm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>        rm.should.not.be.null();<br>        rm.error.should.equal(constants.messages.COULD_NOT_COMPLETE_SESSION_NOT_HOST);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="aecc6916-cf39-400c-8880-3971aad82952" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session id is invalid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#aecc6916-cf39-400c-8880-3971aad82952 > .test-code.collapse">Code</button>
              <span class="test-duration fast">22 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> scm = messageFactory.create(messageConstants.SESSION_COMPLETE);<br>    scm.sessionId = idUtility.generateSessionId();<br>    scm.hostId = rm.hostId;<br>    hc.emit(messageConstants.SESSION_COMPLETE, scm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>        rm.should.not.be.null();<br>        rm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="39a79b06-9bac-4ad9-b2a2-1a4dc8c16926" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is already completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#39a79b06-9bac-4ad9-b2a2-1a4dc8c16926 > .test-code.collapse">Code</button>
              <span class="test-duration fast">21 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    helper.getLatestSession().complete();<br>    <span class="hljs-keyword">var</span> scm = messageFactory.create(messageConstants.SESSION_COMPLETE);<br>    scm.sessionId = rm.sessionId;<br>    scm.hostId = rm.hostId;<br>    hc.emit(messageConstants.SESSION_COMPLETE, scm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>        rm.should.not.be.null();<br>        rm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="7fdc8961-5795-4efc-b076-d68cbd805c96" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should notify observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#7fdc8961-5795-4efc-b076-d68cbd805c96 > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> scm = messageFactory.create(messageConstants.SESSION_COMPLETE);<br>    scm.sessionId = rm.sessionId;<br>    scm.hostId = rm.hostId;<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        om.should.not.be.null();<br>        done();<br>    });<br>    hc.emit(messageConstants.SESSION_COMPLETE, scm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.SUCCESS);<br>        rm.should.not.be.null();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="3db0649c-8e29-425a-b140-067409470f2d" class="suite has-suites">
            <h3 class="suite-title">buzzer</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
        
              <section class="suite-wrap">
          <div id="cfafb6b5-1d07-4137-aa3f-fb6ad194701b" class="suite has-suites has-tests has-passed">
            <h3 class="suite-title">action</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="cfafb6b5-1d07-4137-aa3f-fb6ad194701b" class="suite-chart" width="50" height="50" data-total-passes="12" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">388 ms</li>
                <li class="suite-summary-item tests">12</li>
                <li class="suite-summary-item passed">12</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#cfafb6b5-1d07-4137-aa3f-fb6ad194701b-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="cfafb6b5-1d07-4137-aa3f-fb6ad194701b-test-list" class="list-group test-list collapse in">
                    <div id="65f873fe-4525-4dd6-9d0e-7480915a419b" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow accept when valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#65f873fe-4525-4dd6-9d0e-7480915a419b > .test-code.collapse">Code</button>
              <span class="test-duration medium">43 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm,<br>            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                messageFactory.restore(m, messageConstants.SUCCESS);<br>                helper.getLatestSession().currentState.should<br>                    .equal(constants.gameStates.PENDING);<br>                <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                    messageConstants.BUZZER_ACTION_COMMAND<br>                );<br>                hrm.sessionId = sessionId;<br>                hrm.hostId = hostId;<br>                hrm.action = constants.buzzerActionCommands<br>                    .ACCEPT;<br>                hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                    hrm,<br>                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                        <span class="hljs-keyword">var</span> sm = messageFactory.restore(<br>                            rm, messageConstants.SUCCESS<br>                        );<br>                        sm.should.not.be.null();<br>                        helper.getLatestSession().currentState<br>                            .should.equal(constants.gameStates<br>                                .READY);<br>                        helper.getLatestSession().roundWinner<br>                            .should.equal(<span class="hljs-string">'username'</span>);<br>                        done();<br>                    });<br>            });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="30a56081-89e8-47d9-8ef5-2b8a4bd53b8e" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow reject when valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#30a56081-89e8-47d9-8ef5-2b8a4bd53b8e > .test-code.collapse">Code</button>
              <span class="test-duration medium">50 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm,<br>            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                messageFactory.restore(m, messageConstants.SUCCESS);<br>                helper.getLatestSession().currentState.should<br>                    .equal(constants.gameStates.PENDING);<br>                <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                    messageConstants.BUZZER_ACTION_COMMAND<br>                );<br>                hrm.sessionId = sessionId;<br>                hrm.hostId = hostId;<br>                hrm.action = constants.buzzerActionCommands<br>                    .REJECT;<br>                hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                    hrm,<br>                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                        <span class="hljs-keyword">var</span> sm = messageFactory.restore(<br>                            rm, messageConstants.SUCCESS<br>                        );<br>                        sm.should.not.be.null();<br>                        helper.getLatestSession().currentState<br>                            .should.equal(constants.gameStates<br>                                .READY);<br>                        should(helper.getLatestSession()<br>                            .roundWinner).be.null();<br>                        done();<br>                    });<br>            });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="890eee36-f4fd-4ae5-9c5c-be3a04301a02" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow reset when valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#890eee36-f4fd-4ae5-9c5c-be3a04301a02 > .test-code.collapse">Code</button>
              <span class="test-duration fast">19 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> hrm = messageFactory.create(messageConstants.BUZZER_ACTION_COMMAND);<br>    hrm.sessionId = rm.sessionId;<br>    hrm.hostId = rm.hostId;<br>    hrm.action = constants.buzzerActionCommands.RESET;<br>    hc.emit(messageConstants.BUZZER_ACTION_COMMAND, hrm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="c8cd1ccc-7a62-4628-876d-52173c626299" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow disable when valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#c8cd1ccc-7a62-4628-876d-52173c626299 > .test-code.collapse">Code</button>
              <span class="test-duration fast">36 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    helper.hostBuzzerAction(hc, rm.sessionId, rm.hostId, constants.buzzerActionCommands<br>        .DISABLE,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sm</span>) </span>{<br>            sm.should.be.instanceOf(successMessage);<br>            helper.getLatestSession().currentState.should.equal(<br>                constants.gameStates.BUZZER_LOCK);<br>            done();<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="be2bb872-6f79-4a1a-8c8f-198bc3bbec8e" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow enable when valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#be2bb872-6f79-4a1a-8c8f-198bc3bbec8e > .test-code.collapse">Code</button>
              <span class="test-duration fast">21 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    helper.hostBuzzerAction(hc, rm.sessionId, rm.hostId, constants.buzzerActionCommands<br>        .DISABLE,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sm</span>) </span>{<br>            sm.should.be.instanceOf(successMessage);<br>            helper.getLatestSession().currentState.should.equal(<br>                constants.gameStates.BUZZER_LOCK);<br>            helper.hostBuzzerAction(hc, rm.sessionId, rm.hostId,<br>                constants.buzzerActionCommands.ENABLE,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sm</span>) </span>{<br>                    sm.should.be.instanceOf(successMessage);<br>                    helper.getLatestSession().currentState.should<br>                        .equal(constants.gameStates.READY);<br>                    done();<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="64a03241-3ba7-4747-9711-7262ac635aad" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow accept when state is not pending
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#64a03241-3ba7-4747-9711-7262ac635aad > .test-code.collapse">Code</button>
              <span class="test-duration fast">21 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> hrm = messageFactory.create(messageConstants.BUZZER_ACTION_COMMAND);<br>    hrm.sessionId = rm.sessionId;<br>    hrm.hostId = rm.hostId;<br>    hrm.action = constants.buzzerActionCommands.ACCEPT;<br>    hc.emit(messageConstants.BUZZER_ACTION_COMMAND, hrm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="c28b8657-7ad3-47cb-801f-470a378472db" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow reject when state is not pending
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#c28b8657-7ad3-47cb-801f-470a378472db > .test-code.collapse">Code</button>
              <span class="test-duration fast">23 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> hrm = messageFactory.create(messageConstants.BUZZER_ACTION_COMMAND);<br>    hrm.sessionId = rm.sessionId;<br>    hrm.hostId = rm.hostId;<br>    hrm.action = constants.buzzerActionCommands.REJECT;<br>    hc.emit(messageConstants.BUZZER_ACTION_COMMAND, hrm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="ecd895c8-b5af-4722-8e47-55dfd3db65b1" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow reset when game state is ready
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#ecd895c8-b5af-4722-8e47-55dfd3db65b1 > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> hrm = messageFactory.create(messageConstants.BUZZER_ACTION_COMMAND);<br>    hrm.sessionId = rm.sessionId;<br>    hrm.hostId = rm.hostId;<br>    hrm.action = constants.buzzerActionCommands.RESET;<br>    hc.emit(messageConstants.BUZZER_ACTION_COMMAND, hrm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="047bb919-a39b-4d27-a624-bf3aff1baab0" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow reset when game state is pending
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#047bb919-a39b-4d27-a624-bf3aff1baab0 > .test-code.collapse">Code</button>
              <span class="test-duration medium">42 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm,<br>            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                messageFactory.restore(m, messageConstants.SUCCESS);<br>                helper.getLatestSession().currentState.should<br>                    .equal(constants.gameStates.PENDING);<br>                <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                    messageConstants.BUZZER_ACTION_COMMAND<br>                );<br>                hrm.sessionId = sessionId;<br>                hrm.hostId = hostId;<br>                hrm.action = constants.buzzerActionCommands<br>                    .RESET;<br>                hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                    hrm,<br>                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                        <span class="hljs-keyword">var</span> sm = messageFactory.restore(<br>                            rm, messageConstants.SUCCESS<br>                        );<br>                        sm.should.not.be.null();<br>                        helper.getLatestSession().currentState<br>                            .should.equal(constants.gameStates<br>                                .READY);<br>                        should.not.exist(helper.getLatestSession()<br>                            .roundWinner);<br>                        done();<br>                    });<br>            });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="61ea6368-e841-490d-b330-c8ad389e1e66" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow response when host id is invalid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#61ea6368-e841-490d-b330-c8ad389e1e66 > .test-code.collapse">Code</button>
              <span class="test-duration medium">40 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm,<br>            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                    messageConstants.BUZZER_ACTION_COMMAND<br>                );<br>                hrm.sessionId = sessionId;<br>                hrm.hostId = idUtility.generateParticipantId();<br>                hrm.action = constants.buzzerActionCommands<br>                    .ACCEPT;<br>                hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                    hrm,<br>                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                        <span class="hljs-keyword">var</span> em = messageFactory.restore(<br>                            rm, messageConstants.ERROR<br>                        );<br>                        em.error.should.equal(constants<br>                            .messages.COULD_NOT_ACCEPT_REQUEST_NOT_HOST<br>                        );<br>                        done();<br>                    });<br>            });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="f84abdee-48d4-4baa-8f63-50c8d59fea26" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow response when session id is invalid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#f84abdee-48d4-4baa-8f63-50c8d59fea26 > .test-code.collapse">Code</button>
              <span class="test-duration fast">37 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm,<br>            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                    messageConstants.BUZZER_ACTION_COMMAND<br>                );<br>                hrm.sessionId = idUtility.generateSessionId();<br>                hrm.hostId = hostId;<br>                hrm.action = constants.buzzerActionCommands<br>                    .ACCEPT;<br>                hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                    hrm,<br>                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                        <span class="hljs-keyword">var</span> em = messageFactory.restore(<br>                            rm, messageConstants.ERROR<br>                        );<br>                        em.error.should.equal(constants<br>                            .messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED<br>                        );<br>                        done();<br>                    });<br>            });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="428d8471-6632-4de3-ac85-916bfd5df972" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow response when session is complete
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#428d8471-6632-4de3-ac85-916bfd5df972 > .test-code.collapse">Code</button>
              <span class="test-duration medium">38 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm,<br>            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                    messageConstants.BUZZER_ACTION_COMMAND<br>                );<br>                hrm.sessionId = sessionId;<br>                hrm.hostId = hostId;<br>                hrm.action = constants.buzzerActionCommands<br>                    .ACCEPT;<br>                helper.getLatestSession().complete();<br>                hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                    hrm,<br>                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                        <span class="hljs-keyword">var</span> em = messageFactory.restore(<br>                            rm, messageConstants.ERROR<br>                        );<br>                        em.error.should.equal(constants<br>                            .messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED<br>                        );<br>                        done();<br>                    });<br>            });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
              <section class="suite-wrap">
          <div id="5dfdcb1c-5ccf-4738-b546-ad04c8e153a7" class="suite has-tests has-passed">
            <h3 class="suite-title">when accepted</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="5dfdcb1c-5ccf-4738-b546-ad04c8e153a7" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">136 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#5dfdcb1c-5ccf-4738-b546-ad04c8e153a7-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="5dfdcb1c-5ccf-4738-b546-ad04c8e153a7-test-list" class="list-group test-list collapse in">
                    <div id="ec3e1c5c-42d5-4ffb-b087-559d69828737" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#ec3e1c5c-42d5-4ffb-b087-559d69828737 > .test-code.collapse">Code</button>
              <span class="test-duration medium">53 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m,<br>            messageConstants.OBSERVER_UPDATE);<br>        <span class="hljs-keyword">if</span> (om.gameState.contestants.length &amp;&amp; om.gameState<br>            .contestants[<span class="hljs-number">0</span>].score === <span class="hljs-number">1</span>) {<br>            done();<br>        }<br>    });<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .ACCEPT;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm);<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="ab8f16cf-57fc-4505-a1cc-471cc81526b9" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update contestant score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#ab8f16cf-57fc-4505-a1cc-471cc81526b9 > .test-code.collapse">Code</button>
              <span class="test-duration medium">40 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .ACCEPT;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">1</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="0d6905ae-299f-4250-ad5b-aee6920b430d" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update team score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#0d6905ae-299f-4250-ad5b-aee6920b430d > .test-code.collapse">Code</button>
              <span class="test-duration medium">43 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .ACCEPT;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">1</span>);<br>                            <span class="hljs-keyword">var</span> t = s.teams.all[<br>                                <span class="hljs-number">0</span>];<br>                            t.score.should.equal(<br>                                <span class="hljs-number">1</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="da440398-0c3f-439e-b2b0-300d80bbe45e" class="suite has-tests has-passed">
            <h3 class="suite-title">when rejected</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="da440398-0c3f-439e-b2b0-300d80bbe45e" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">124 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#da440398-0c3f-439e-b2b0-300d80bbe45e-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="da440398-0c3f-439e-b2b0-300d80bbe45e-test-list" class="list-group test-list collapse in">
                    <div id="b4a33256-8e55-4901-9f8a-72409bcba094" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#b4a33256-8e55-4901-9f8a-72409bcba094 > .test-code.collapse">Code</button>
              <span class="test-duration medium">43 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> observedPending = <span class="hljs-literal">false</span>;<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m,<br>            messageConstants.OBSERVER_UPDATE);<br>        <span class="hljs-keyword">if</span> (om.gameState.currentState === constants<br>            .gameStates.PENDING) {<br>            observedPending = <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">return</span>;<br>        }<br>        <span class="hljs-keyword">if</span> (observedPending &amp;&amp; om.gameState.currentState ===<br>            constants.gameStates.READY) {<br>            om.gameState.contestants.length.should.equal(<br>                <span class="hljs-number">1</span>);<br>            om.gameState.contestants[<span class="hljs-number">0</span>].score.should<br>                .equal(<span class="hljs-number">0</span>);<br>            done();<br>        }<br>    });<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .REJECT;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm);<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="76747182-c505-4f61-bf55-0f86aae44bbe" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not update contestant score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#76747182-c505-4f61-bf55-0f86aae44bbe > .test-code.collapse">Code</button>
              <span class="test-duration medium">41 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .REJECT;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="d98bfacd-c40f-47ac-b4c6-ed6e29985f10" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not update team score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#d98bfacd-c40f-47ac-b4c6-ed6e29985f10 > .test-code.collapse">Code</button>
              <span class="test-duration medium">40 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .REJECT;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            <span class="hljs-keyword">var</span> t = s.teams.all[<br>                                <span class="hljs-number">0</span>];<br>                            t.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="858b1fd1-7c95-4b27-8883-e231bc431bcf" class="suite has-tests has-passed">
            <h3 class="suite-title">when reset</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="858b1fd1-7c95-4b27-8883-e231bc431bcf" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">133 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#858b1fd1-7c95-4b27-8883-e231bc431bcf-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="858b1fd1-7c95-4b27-8883-e231bc431bcf-test-list" class="list-group test-list collapse in">
                    <div id="1a297722-f7c4-48ae-8d92-25c8b99dbd0c" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#1a297722-f7c4-48ae-8d92-25c8b99dbd0c > .test-code.collapse">Code</button>
              <span class="test-duration medium">52 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> observedPending = <span class="hljs-literal">false</span>;<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m,<br>            messageConstants.OBSERVER_UPDATE);<br>        <span class="hljs-keyword">if</span> (om.gameState.currentState === constants<br>            .gameStates.PENDING) {<br>            observedPending = <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">return</span>;<br>        }<br>        <span class="hljs-keyword">if</span> (observedPending &amp;&amp; om.gameState.currentState ===<br>            constants.gameStates.READY) {<br>            om.gameState.contestants.length.should.equal(<br>                <span class="hljs-number">1</span>);<br>            om.gameState.contestants[<span class="hljs-number">0</span>].score.should<br>                .equal(<span class="hljs-number">0</span>);<br>            done();<br>        }<br>    });<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            helper.contestantBuzzerPress(cc, sessionId,<br>                rm.contestantId,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>                    helper.hostBuzzerAction(hc,<br>                        sessionId, hostId,<br>                        constants.buzzerActionCommands<br>                        .RESET);<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="f8626d38-b048-4a25-b128-e676b00e32bf" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not update contestant score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#f8626d38-b048-4a25-b128-e676b00e32bf > .test-code.collapse">Code</button>
              <span class="test-duration medium">38 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .RESET;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="244bc0f9-140e-403a-ae6b-30074f909ca4" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not update team score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#244bc0f9-140e-403a-ae6b-30074f909ca4 > .test-code.collapse">Code</button>
              <span class="test-duration medium">43 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .RESET;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            <span class="hljs-keyword">var</span> t = s.teams.all[<br>                                <span class="hljs-number">0</span>];<br>                            t.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="2e57cc0f-0c70-484e-9b16-adedd31ba047" class="suite has-tests has-passed">
            <h3 class="suite-title">when disabled</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="2e57cc0f-0c70-484e-9b16-adedd31ba047" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">104 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#2e57cc0f-0c70-484e-9b16-adedd31ba047-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="2e57cc0f-0c70-484e-9b16-adedd31ba047-test-list" class="list-group test-list collapse in">
                    <div id="20d733cd-ab49-4fb3-981e-4b018b861d9f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#20d733cd-ab49-4fb3-981e-4b018b861d9f > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br><span class="hljs-comment">// listen for observer update</span><br>hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>    <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>    <span class="hljs-keyword">if</span> (om.gameState.currentState === constants.gameStates.BUZZER_LOCK) {<br>        done();<br>    }<br>});<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    helper.hostBuzzerAction(hc, rm.sessionId, rm.hostId,<br>        constants.buzzerActionCommands.DISABLE);<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="81c93a05-7c3f-4988-887a-efa1494b4251" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not update contestant score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#81c93a05-7c3f-4988-887a-efa1494b4251 > .test-code.collapse">Code</button>
              <span class="test-duration medium">45 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .DISABLE;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="b4f7e44c-e143-482c-a9b2-db8f98275447" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not update team score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#b4f7e44c-e143-482c-a9b2-db8f98275447 > .test-code.collapse">Code</button>
              <span class="test-duration medium">41 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .DISABLE;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            <span class="hljs-keyword">var</span> t = s.teams.all[<br>                                <span class="hljs-number">0</span>];<br>                            t.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="94f50b78-cd52-4929-a0f0-c781cf711770" class="suite has-tests has-passed">
            <h3 class="suite-title">when enabled</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="94f50b78-cd52-4929-a0f0-c781cf711770" class="suite-chart" width="50" height="50" data-total-passes="1" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">26 ms</li>
                <li class="suite-summary-item tests">1</li>
                <li class="suite-summary-item passed">1</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#94f50b78-cd52-4929-a0f0-c781cf711770-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="94f50b78-cd52-4929-a0f0-c781cf711770-test-list" class="list-group test-list collapse in">
                    <div id="6366bf8c-d3aa-45de-8257-78305f4d00a0" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#6366bf8c-d3aa-45de-8257-78305f4d00a0 > .test-code.collapse">Code</button>
              <span class="test-duration fast">26 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br><span class="hljs-keyword">var</span> observedLocked = <span class="hljs-literal">false</span>;<br><span class="hljs-comment">// listen for observer update</span><br>hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>    <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>    <span class="hljs-keyword">if</span> (om.gameState.currentState === constants.gameStates.BUZZER_LOCK) {<br>        observedLocked = <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">return</span>;<br>    }<br>    <span class="hljs-keyword">if</span> (observedLocked &amp;&amp; om.gameState.currentState ===<br>        constants.gameStates.READY) {<br>        done();<br>    }<br>});<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    helper.hostBuzzerAction(hc, rm.sessionId, rm.hostId,<br>        constants.buzzerActionCommands.DISABLE,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sm</span>) </span>{<br>            sm.should.be.instanceOf(successMessage);<br>            helper.getLatestSession().currentState.should<br>                .equal(constants.gameStates.BUZZER_LOCK);<br>            helper.hostBuzzerAction(hc, rm.sessionId,<br>                rm.hostId, constants.buzzerActionCommands<br>                .ENABLE,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sm</span>) </span>{<br>                    sm.should.be.instanceOf(<br>                        successMessage);<br>                    helper.getLatestSession().currentState<br>                        .should.equal(constants.gameStates<br>                            .READY);<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="f0ce0a4f-f3c0-48b4-afe4-053953b9a93a" class="suite has-tests has-passed">
            <h3 class="suite-title">team name change</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="f0ce0a4f-f3c0-48b4-afe4-053953b9a93a" class="suite-chart" width="50" height="50" data-total-passes="8" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">163 ms</li>
                <li class="suite-summary-item tests">8</li>
                <li class="suite-summary-item passed">8</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#f0ce0a4f-f3c0-48b4-afe4-053953b9a93a-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="f0ce0a4f-f3c0-48b4-afe4-053953b9a93a-test-list" class="list-group test-list collapse in">
                    <div id="0f6e7138-882a-4b54-abf4-dad0d42e4de0" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#0f6e7138-882a-4b54-abf4-dad0d42e4de0 > .test-code.collapse">Code</button>
              <span class="test-duration fast">20 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.teamNameFrom = team.teamName;<br>    req.teamNameTo = <span class="hljs-string">'The new team name'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        team.teamName.should.equal(req.teamNameTo);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="82a9a49a-f1c6-4cb6-b21c-7ee9d9215e38" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it when name contains profanity
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#82a9a49a-f1c6-4cb6-b21c-7ee9d9215e38 > .test-code.collapse">Code</button>
              <span class="test-duration fast">30 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.teamNameFrom = team.teamName;<br>    req.teamNameTo = <span class="hljs-string">'ash0le penis'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        team.teamName.should.equal(req.teamNameTo);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="0cbde373-0e27-44bb-bb70-b0376b0b6b5d" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it when team name editing is manual
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#0cbde373-0e27-44bb-bb70-b0376b0b6b5d > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.MANUAL;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.teamNameFrom = team.teamName;<br>    req.teamNameTo = <span class="hljs-string">'The new team name'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        team.teamName.should.equal(req.teamNameTo);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="9120b2bc-ee15-47b9-951d-da1477fb01d4" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#9120b2bc-ee15-47b9-951d-da1477fb01d4 > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>    session.complete();<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.teamNameFrom = team.teamName;<br>    req.teamNameTo = <span class="hljs-string">'A new team name'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="7015eab4-77a0-4787-8884-5782c579f150" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when not the host
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#7015eab4-77a0-4787-8884-5782c579f150 > .test-code.collapse">Code</button>
              <span class="test-duration fast">19 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = idUtility.generateParticipantId();<br>    req.teamNameFrom = team.teamName;<br>    req.teamNameTo = <span class="hljs-string">'A new team name'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_REQUEST_NOT_HOST);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="e66893a7-c1b9-4ba7-b488-e5b9a4a79a08" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it team does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#e66893a7-c1b9-4ba7-b488-e5b9a4a79a08 > .test-code.collapse">Code</button>
              <span class="test-duration fast">19 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.teamNameFrom = <span class="hljs-string">'does not exist'</span>;<br>    req.teamNameTo = <span class="hljs-string">'some other team name'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.COULD_NOT_PROCESS_REQUEST_TEAM_NOT_FOUND);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="375cb6e2-3b6c-4ab1-a8c2-a9820fb85981" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when team name already in use
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#375cb6e2-3b6c-4ab1-a8c2-a9820fb85981 > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">2</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team1 = session.teams.all[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">var</span> team2 = session.teams.all[<span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.teamNameFrom = team1.teamName;<br>    req.teamNameTo = team2.teamName;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_NAME_IN_USE);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="b4516a67-4866-4acf-b5ac-01e4e881c308" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#b4516a67-4866-4acf-b5ac-01e4e881c308 > .test-code.collapse">Code</button>
              <span class="test-duration fast">21 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">2</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = idUtility.generateSessionId();<br>    req.hostId = hostId;<br>    req.teamNameFrom = team.teamName;<br>    req.teamNameTo = <span class="hljs-string">'some new name'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="90aa2ea5-6f5e-4ebc-8ea4-87f0183e55dd" class="suite has-tests has-passed">
            <h3 class="suite-title">team leader change</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="90aa2ea5-6f5e-4ebc-8ea4-87f0183e55dd" class="suite-chart" width="50" height="50" data-total-passes="7" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">410 ms</li>
                <li class="suite-summary-item tests">7</li>
                <li class="suite-summary-item passed">7</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#90aa2ea5-6f5e-4ebc-8ea4-87f0183e55dd-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="90aa2ea5-6f5e-4ebc-8ea4-87f0183e55dd-test-list" class="list-group test-list collapse in">
                    <div id="490b6b88-3f6c-4f3b-8a60-bae7502dab1b" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#490b6b88-3f6c-4f3b-8a60-bae7502dab1b > .test-code.collapse">Code</button>
              <span class="test-duration medium">57 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> teamLeaderUsername = team.teamLeader.username;<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = sessionId;<br>            req.hostId = hostId;<br>            req.teamName = team.teamName;<br>            req.teamLeaderUsername = team.teamLeader.username ===<br>                <span class="hljs-string">'c1'</span> ? <span class="hljs-string">'c2'</span> : <span class="hljs-string">'c1'</span>;<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> sm = messageFactory.restore(m,<br>                        messageConstants.SUCCESS);<br>                    sm.should.not.be.null();<br>                    team.teamLeader.username.should.not.equal(<br>                        teamLeaderUsername);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="10aa5a24-5aa4-4177-b167-1293da23d5c0" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it team leader is the same
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#10aa5a24-5aa4-4177-b167-1293da23d5c0 > .test-code.collapse">Code</button>
              <span class="test-duration medium">67 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> teamLeaderUsername = team.teamLeader.username;<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = sessionId;<br>            req.hostId = hostId;<br>            req.teamName = team.teamName;<br>            req.teamLeaderUsername = team.teamLeader.username;<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> sm = messageFactory.restore(m,<br>                        messageConstants.SUCCESS);<br>                    sm.should.not.be.null();<br>                    team.teamLeader.username.should.equal(<br>                        teamLeaderUsername);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="02608ccd-7925-4623-b9a6-aca7b0010f4a" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#02608ccd-7925-4623-b9a6-aca7b0010f4a > .test-code.collapse">Code</button>
              <span class="test-duration medium">67 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = sessionId;<br>            req.hostId = hostId;<br>            req.teamName = team.teamName;<br>            req.teamLeaderUsername = team.teamLeader.username ===<br>                <span class="hljs-string">'c1'</span> ? <span class="hljs-string">'c2'</span> : <span class="hljs-string">'c1'</span>;<br>            session.complete();<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m,<br>                        messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="76cc9e5c-8669-43dd-9e2f-5869a933a99d" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when not the host
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#76cc9e5c-8669-43dd-9e2f-5869a933a99d > .test-code.collapse">Code</button>
              <span class="test-duration medium">54 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = sessionId;<br>            req.hostId = idUtility.generateParticipantId();<br>            req.teamName = team.teamName;<br>            req.teamLeaderUsername = team.teamLeader.username ===<br>                <span class="hljs-string">'c1'</span> ? <span class="hljs-string">'c2'</span> : <span class="hljs-string">'c1'</span>;<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m,<br>                        messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_REQUEST_NOT_HOST);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="93785bbe-5c8e-463b-bf8b-784327382b50" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it team does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#93785bbe-5c8e-463b-bf8b-784327382b50 > .test-code.collapse">Code</button>
              <span class="test-duration medium">51 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = sessionId;<br>            req.hostId = hostId;<br>            req.teamName = <span class="hljs-string">'does not exist team name'</span>;<br>            req.teamLeaderUsername = team.teamLeader.username ===<br>                <span class="hljs-string">'c1'</span> ? <span class="hljs-string">'c2'</span> : <span class="hljs-string">'c1'</span>;<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m,<br>                        messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.COULD_NOT_PROCESS_REQUEST_TEAM_NOT_FOUND);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="47e1be04-39c3-4d95-930b-68c284e90bee" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#47e1be04-39c3-4d95-930b-68c284e90bee > .test-code.collapse">Code</button>
              <span class="test-duration medium">62 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = idUtility.generateSessionId();<br>            req.hostId = hostId;<br>            req.teamName = team.teamName;<br>            req.teamLeaderUsername = team.teamLeader.username ===<br>                <span class="hljs-string">'c1'</span> ? <span class="hljs-string">'c2'</span> : <span class="hljs-string">'c1'</span>;<br>            session.complete();<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m,<br>                        messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="af5dea8b-b809-4ce2-b582-4d89346c5a92" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when contestant does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#af5dea8b-b809-4ce2-b582-4d89346c5a92 > .test-code.collapse">Code</button>
              <span class="test-duration medium">52 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = sessionId;<br>            req.hostId = hostId;<br>            req.teamName = team.teamName;<br>            req.teamLeaderUsername = <span class="hljs-string">'does not exist'</span>;<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m,<br>                        messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.COULD_NOT_PROCESS_REQUEST_CONTESTANT_NOT_FOUND);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="2368a30a-42b0-44c7-93b9-c707e34e5af6" class="suite has-tests has-passed">
            <h3 class="suite-title">info request</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="2368a30a-42b0-44c7-93b9-c707e34e5af6" class="suite-chart" width="50" height="50" data-total-passes="4" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">77 ms</li>
                <li class="suite-summary-item tests">4</li>
                <li class="suite-summary-item passed">4</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#2368a30a-42b0-44c7-93b9-c707e34e5af6-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="2368a30a-42b0-44c7-93b9-c707e34e5af6-test-list" class="list-group test-list collapse in">
                    <div id="870de285-968d-4c9a-a1fb-2b99a0570bc0" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should return in a valid state for individuals contestant
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#870de285-968d-4c9a-a1fb-2b99a0570bc0 > .test-code.collapse">Code</button>
              <span class="test-duration fast">20 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.participantId = hostId;<br>    hc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> irm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>        irm.should.not.be.null();<br>        should(irm.info).not.be.null();<br>        should(irm.info.host).not.be.null();<br>        should(irm.info.contestant).be.null();<br>        should(irm.info.team).be.null();<br>        should(irm.info.session).not.be.null();<br>        should(irm.info.sessionState).be.equal(<span class="hljs-string">'ready'</span>);<br>        should(irm.info.isObserver).be.false();<br>        should(irm.info.isHost).be.true();<br>        should(irm.info.isContestant).be.false();<br>        should(irm.info.isSessionCompleted).be.false();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="5bde0592-eb0f-4453-b4a9-aa493ee03ee0" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#5bde0592-eb0f-4453-b4a9-aa493ee03ee0 > .test-code.collapse">Code</button>
              <span class="test-duration fast">19 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = idUtility.generateSessionId();<br>    req.participantId = hostId;<br>    hc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="19a15546-d26b-4665-8c94-042271b3778f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when contestant does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#19a15546-d26b-4665-8c94-042271b3778f > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.participantId = idUtility.generateParticipantId();<br>    hc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>        em.error.should.equal(constants.messages.COULD_NOT_PROCESS_REQUEST_CONTESTANT_OR_HOST_NOT_FOUND);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="8ebe6b39-2683-4420-a5b1-e9d17e947b83" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when session is complete
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#8ebe6b39-2683-4420-a5b1-e9d17e947b83 > .test-code.collapse">Code</button>
              <span class="test-duration fast">20 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.participantId = hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    session.complete();<br>    hc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> irm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>        irm.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="13e98c78-f3dd-4aab-bddb-be715cf3a911" class="suite has-tests has-passed">
            <h3 class="suite-title">on disconnect</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="13e98c78-f3dd-4aab-bddb-be715cf3a911" class="suite-chart" width="50" height="50" data-total-passes="1" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">37 ms</li>
                <li class="suite-summary-item tests">1</li>
                <li class="suite-summary-item passed">1</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#13e98c78-f3dd-4aab-bddb-be715cf3a911-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="13e98c78-f3dd-4aab-bddb-be715cf3a911-test-list" class="list-group test-list collapse in">
                    <div id="fc342241-a09f-42c5-b69b-2003038bd35c" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#fc342241-a09f-42c5-b69b-2003038bd35c > .test-code.collapse">Code</button>
              <span class="test-duration fast">37 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> c = helper.createClient();<br>    helper.contestantJoin(c, <span class="hljs-string">'test user'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-comment">// listen for observer update</span><br>        c.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>            <span class="hljs-keyword">if</span> (om.gameState.host.disconnected) {<br>                done();<br>                c.discount();<br>            }<br>        });<br>        helper.clients = [];<br>        <span class="hljs-comment">// disconnect host</span><br>        hc.disconnect();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
        
          </div>
        </section>
            <section class="suite-wrap">
          <div id="15913d91-f6c4-4082-8ebc-d22b682c51d1" class="suite has-suites">
            <h3 class="suite-title">Buzzer server</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerObserverTests.js</h5>
        
              <section class="suite-wrap">
          <div id="06be03c7-4213-45ea-8368-33b5e964f249" class="suite has-suites">
            <h3 class="suite-title">observer</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerObserverTests.js</h5>
        
              <section class="suite-wrap">
          <div id="d57e99c1-b6cc-46fe-ab2a-88363511c54d" class="suite has-tests has-passed">
            <h3 class="suite-title">rejoin</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerObserverTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="d57e99c1-b6cc-46fe-ab2a-88363511c54d" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">96 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#d57e99c1-b6cc-46fe-ab2a-88363511c54d-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="d57e99c1-b6cc-46fe-ab2a-88363511c54d-test-list" class="list-group test-list collapse in">
                    <div id="18fa302d-206d-458b-af2d-eb85f8222cb7" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid and subscribe observer to the observer room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#18fa302d-206d-458b-af2d-eb85f8222cb7 > .test-code.collapse">Code</button>
              <span class="test-duration fast">33 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> oc = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = rm.sessionId;<br>    rjm.rejoinAs = constants.rejoinAs.OBSERVER;<br>    <span class="hljs-comment">// listen for observer update</span><br>    oc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) </span>{<br>        <span class="hljs-keyword">var</span> ob = messageFactory.restore(message, messageConstants.OBSERVER_UPDATE);<br>        ob.should.not.be.null();<br>        done();<br>    });<br>    oc.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{<br>        data.type.should.equal(messageConstants.SUCCESS);<br>        <span class="hljs-comment">// force observer update</span><br>        helper.forceObserveUpdate(rm.sessionId);<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="f2f9896e-ba3c-4780-9833-3889838550ac" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#f2f9896e-ba3c-4780-9833-3889838550ac > .test-code.collapse">Code</button>
              <span class="test-duration fast">30 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> ob = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = idUtility.generateSessionId();<br>    rjm.rejoinAs = constants.rejoinAs.OBSERVER;<br>    ob.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="9f789688-2033-47e6-bdbd-c33b3874662c" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#9f789688-2033-47e6-bdbd-c33b3874662c > .test-code.collapse">Code</button>
              <span class="test-duration fast">33 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> ob = helper.createClient();<br>    helper.getLatestSession().complete();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = idUtility.generateSessionId();<br>    rjm.rejoinAs = constants.rejoinAs.OBSERVER;<br>    ob.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="e9b615f3-c387-41a9-8fa3-1b19bc8d80d0" class="suite has-tests has-passed">
            <h3 class="suite-title">info request</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerObserverTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="e9b615f3-c387-41a9-8fa3-1b19bc8d80d0" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">106 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#e9b615f3-c387-41a9-8fa3-1b19bc8d80d0-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="e9b615f3-c387-41a9-8fa3-1b19bc8d80d0-test-list" class="list-group test-list collapse in">
                    <div id="e16965d0-ed68-4e80-bf58-f51d8d416d67" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should return in a valid state for individuals contestant
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#e16965d0-ed68-4e80-bf58-f51d8d416d67 > .test-code.collapse">Code</button>
              <span class="test-duration fast">36 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    <span class="hljs-keyword">var</span> oc = helper.createClient();<br>    oc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> irm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>        irm.should.not.be.null();<br>        should(irm.info).not.be.null();<br>        should(irm.info.host).be.null();<br>        should(irm.info.contestant).be.null();<br>        should(irm.info.team).be.null();<br>        should(irm.info.session).not.be.null();<br>        should(irm.info.sessionState).be.equal(<span class="hljs-string">'ready'</span>);<br>        should(irm.info.isObserver).be.true();<br>        should(irm.info.isHost).be.false();<br>        should(irm.info.isContestant).be.false();<br>        should(irm.info.isSessionCompleted).be.false();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="d154d0b4-f04b-4467-9b49-e5199588a63f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#d154d0b4-f04b-4467-9b49-e5199588a63f > .test-code.collapse">Code</button>
              <span class="test-duration fast">28 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = idUtility.generateSessionId();<br>    <span class="hljs-keyword">var</span> oc = helper.createClient();<br>    oc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="e0ff2190-1515-4426-8767-e8d319337209" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when session is complete
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#e0ff2190-1515-4426-8767-e8d319337209 > .test-code.collapse">Code</button>
              <span class="test-duration medium">42 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    session.complete();<br>    <span class="hljs-keyword">var</span> oc = helper.createClient();<br>    oc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> irm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>        irm.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
        
          </div>
        </section>
    </div>

    <footer>
      <div class="container">
        <p>Report generated by <a href="http://adamgruber.github.io/mochawesome/" target="_blank">mochawesome</a>.<br>Designed and built by <a href="https://github.com/adamgruber" target="_blank">adamgruber</a>. &copy;2016.</p>
      </div>
    </footer>

    <!-- Nav Menu -->
    <div class="nav-menu-wrap">
      <div class="menu-overlay close-menu"></div>
      <nav class="menu">
        <button class="nav-menu-btn close-menu"><i class="icon-failed"></i></button>
        <ul class="list-unstyled main-menu">
                <li class="nav-menu-item">
                <a href="#288955ac-e3d6-4be9-8a61-108b1a1fb7df" class="nav-menu-item-link">Buzzer server</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#b3990def-0447-4de8-a2e7-42cac8d39ee1" class="nav-menu-item-link">contestant</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#e872c8d2-f170-4ed1-a784-c814474e384b" class="nav-menu-item-link">join</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#b957e290-e3f2-4fe4-8431-a02ffe29038f" class="nav-menu-item-link has-passes">as individual</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#4b910c5b-11a3-4395-a02d-6e4298dd14e8" class="nav-menu-item-link has-passes">with teams</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#482c454a-d5eb-47fb-8faf-5c39a2ab93f4" class="nav-menu-item-link has-passes">when team leader selection method is RANDOM</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#d840e860-2188-4136-82d1-21a63454dd56" class="nav-menu-item-link has-passes">when team selection method is PLAYER_CHOICE</a>
            </li>
                  </ul>
            </li>
                  </ul>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#5f5a3144-d1df-4522-a07d-ce3437e44e83" class="nav-menu-item-link has-passes">rejoin</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#c6303f04-e7f5-4043-b4f8-4f463fac4bf9" class="nav-menu-item-link has-passes">on disconnect</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#0c8a17cf-ef3c-43cf-852c-def7874be811" class="nav-menu-item-link has-passes">team leader inquiry response</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#40b36711-36ba-4520-9f38-a5f588961772" class="nav-menu-item-link has-passes">buzzerPress</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#b4c43061-5821-49c9-8788-74b717344177" class="nav-menu-item-link has-passes">team name change request</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#59546da7-1137-473c-bc8d-615bc6ed916d" class="nav-menu-item-link has-passes">info request</a>
            </li>
                  </ul>
            </li>
                  </ul>
            </li>
                <li class="nav-menu-item">
                <a href="#f783cf37-3959-4b09-8d34-5907d7e2bc2a" class="nav-menu-item-link">Buzzer server</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#bb7f6287-30ae-47e4-ad76-6c014b5b4489" class="nav-menu-item-link">host</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#2f41f52c-6244-450c-95c5-df3697a56aea" class="nav-menu-item-link">create</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#8e7f952b-1c03-456d-9259-d675a507adb0" class="nav-menu-item-link has-passes">session</a>
            </li>
                  </ul>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#08c62227-73c6-4925-85f0-b9ba2e1b29cd" class="nav-menu-item-link">rejoin</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#5529af6d-1e5b-4836-863b-97ebd5611a78" class="nav-menu-item-link has-passes">session</a>
            </li>
                  </ul>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#ea607766-f744-4033-b2fa-aa5c182e6e4f" class="nav-menu-item-link">complete</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#41afcc90-c577-4196-a468-b5364656a9db" class="nav-menu-item-link has-passes">session</a>
            </li>
                  </ul>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#3db0649c-8e29-425a-b140-067409470f2d" class="nav-menu-item-link">buzzer</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#cfafb6b5-1d07-4137-aa3f-fb6ad194701b" class="nav-menu-item-link has-passes">action</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#5dfdcb1c-5ccf-4738-b546-ad04c8e153a7" class="nav-menu-item-link has-passes">when accepted</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#da440398-0c3f-439e-b2b0-300d80bbe45e" class="nav-menu-item-link has-passes">when rejected</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#858b1fd1-7c95-4b27-8883-e231bc431bcf" class="nav-menu-item-link has-passes">when reset</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#2e57cc0f-0c70-484e-9b16-adedd31ba047" class="nav-menu-item-link has-passes">when disabled</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#94f50b78-cd52-4929-a0f0-c781cf711770" class="nav-menu-item-link has-passes">when enabled</a>
            </li>
                  </ul>
            </li>
                  </ul>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#f0ce0a4f-f3c0-48b4-afe4-053953b9a93a" class="nav-menu-item-link has-passes">team name change</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#90aa2ea5-6f5e-4ebc-8ea4-87f0183e55dd" class="nav-menu-item-link has-passes">team leader change</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#2368a30a-42b0-44c7-93b9-c707e34e5af6" class="nav-menu-item-link has-passes">info request</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#13e98c78-f3dd-4aab-bddb-be715cf3a911" class="nav-menu-item-link has-passes">on disconnect</a>
            </li>
                  </ul>
            </li>
                  </ul>
            </li>
                <li class="nav-menu-item">
                <a href="#15913d91-f6c4-4082-8ebc-d22b682c51d1" class="nav-menu-item-link">Buzzer server</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#06be03c7-4213-45ea-8368-33b5e964f249" class="nav-menu-item-link">observer</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#d57e99c1-b6cc-46fe-ab2a-88363511c54d" class="nav-menu-item-link has-passes">rejoin</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#e9b615f3-c387-41a9-8fa3-1b19bc8d80d0" class="nav-menu-item-link has-passes">info request</a>
            </li>
                  </ul>
            </li>
                  </ul>
            </li>
        </ul>
      </nav>
    </div>

    <!-- Scripts -->
    <script src="js/vendor.js"></script>
    <script src="js/mochawesome.js"></script>
  </body>
</html>
