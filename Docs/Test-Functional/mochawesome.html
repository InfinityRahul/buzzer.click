<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mochawesome Report Card</title>
    
    <link rel="stylesheet" href="css/mochawesome.css">
  </head>
  <body>

    <!-- NAVBAR -->
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="report-info-cnt">
          <h1 class="report-title">buzzer.click</h1>
          <h3 class="report-date">Wednesday, September 28 2016, 06:44pm</h3>
        </div>
        <div class="nav-right">
          <div class="quick-summary-cnt">
              <ul class="list-unstyled quick-summary">
                <li class="qs-item summary-duration" title="Duration">4.771<span>S</span></li>
                <li class="qs-item summary-suites" title="Suites">37</li>
                <li class="qs-item summary-tests" title="Tests">128</li>
                <li class="qs-item summary-passes" title="Passed" data-filter="passed">128</li>
                <li class="qs-item summary-failures" title="Failed" data-filter="failed">0</li>
                <li class="qs-item summary-pending" title="Pending" data-filter="pending">0</li>
              </ul>          </div>
          <button class="nav-menu-btn open-menu"><i class="icon-menu"></i></button>
        </div>
      </div>
    </div>

    <!-- Report Summary -->
    <div class="summary">
      <div class="container">
          <div class="row">
            <div class="summary-col summary-duration">
              <h1 class="summary-count">4.771<span>S</span></h1>
              <h4 class="summary-label">S</h4>
            </div>
            <div class="summary-col summary-suites" title="Suites">
              <h1 class="summary-count">37</h1>
              <h4 class="summary-label">Suites</h4>
            </div>
            <div class="summary-col summary-tests" title="Tests">
              <h1 class="summary-count">128</h1>
              <h4 class="summary-label">Tests</h4>
            </div>
            <div class="summary-col summary-passes" data-filter="passed" title="Passed">
              <h1 class="summary-count">128</h1>
              <h4 class="summary-label">Passed</h4>
            </div>
            <div class="summary-col summary-failures" data-filter="failed" title="Failed">
              <h1 class="summary-count">0</h1>
              <h4 class="summary-label">Failed</h4>
            </div>
            <div class="summary-col summary-pending" data-filter="pending" title="Pending">
              <h1 class="summary-count">0</h1>
              <h4 class="summary-label">Pending</h4>
            </div>
          </div>      </div>
    </div>
    <div class="statusbar">
      <div class="container">
          <div class="row">
            <div class="status-item status-item-pending-pct">0% Pending</div>
            <div class="status-item status-item-passing-pct success">100% Passing</div>
          </div>      </div>
    </div>

    <!-- Suites -->
    <div class="details container">
            <section class="suite-wrap">
          <div id="65ab7b64-3685-40e1-a61d-206bcde2d98a" class="suite has-suites">
            <h3 class="suite-title">Buzzer server</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
        
              <section class="suite-wrap">
          <div id="b84bbcb8-aadc-405e-9b01-3b40f8e61785" class="suite has-suites">
            <h3 class="suite-title">contestant</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
        
              <section class="suite-wrap">
          <div id="482d087c-88a4-4ab9-9195-e84cce287d4e" class="suite has-suites">
            <h3 class="suite-title">join</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
        
              <section class="suite-wrap">
          <div id="192c5286-7ea1-44bc-90e9-081fc8d649b9" class="suite has-tests has-passed">
            <h3 class="suite-title">as individual</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="192c5286-7ea1-44bc-90e9-081fc8d649b9" class="suite-chart" width="50" height="50" data-total-passes="8" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">603 ms</li>
                <li class="suite-summary-item tests">8</li>
                <li class="suite-summary-item passed">8</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#192c5286-7ea1-44bc-90e9-081fc8d649b9-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="192c5286-7ea1-44bc-90e9-081fc8d649b9-test-list" class="list-group test-list collapse in">
                    <div id="52b3d865-a1ba-4bd1-ae37-6109e9cf9be2" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#52b3d865-a1ba-4bd1-ae37-6109e9cf9be2 > .test-code.collapse">Code</button>
              <span class="test-duration slow">223 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.true();<br>        rm.contestantId.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="6bc20a14-2a3a-464c-a7c6-dfb9e34724b3" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#6bc20a14-2a3a-464c-a7c6-dfb9e34724b3 > .test-code.collapse">Code</button>
              <span class="test-duration medium">53 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        om.should.not.be.null();<br>        om.gameState.contestants.length.should.equal(<span class="hljs-number">1</span>);<br>        om.gameState.contestants[<span class="hljs-number">0</span>].username.should.equal(<span class="hljs-string">'Test Person'</span>);<br>        done();<br>    });<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'Test Person'</span>, rm.sessionId);<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="6b1b7fa2-c4bc-4cf5-a3e6-32a4c88d2252" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is full
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#6b1b7fa2-c4bc-4cf5-a3e6-32a4c88d2252 > .test-code.collapse">Code</button>
              <span class="test-duration medium">63 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">responseMessage</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rm1 = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rm1.sessionId = responseMessage.sessionId;<br>    rm1.username = <span class="hljs-string">'TP1'</span>;<br>    <span class="hljs-keyword">var</span> rm2 = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rm2.sessionId = responseMessage.sessionId;<br>    rm2.username = <span class="hljs-string">'TP2'</span>;<br>    <span class="hljs-comment">// Contestant 1 join</span><br>    cc1.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rm1, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m1</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm1 = messageFactory.restore(m1, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm1.wasSuccessful.should.be.true();<br>        <span class="hljs-comment">// Contestant 2 join</span><br>        cc2.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rm2, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m2</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm2 = messageFactory.restore(m2, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            rm2.wasSuccessful.should.be.false();<br>            rm2.failedRequestReason.should.equal(constants.messages.MAXIMUM_SESSION_SIZED_REACHED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="381fcf6d-45da-4ae9-8ee9-82a056200a3b" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should subscribe contestant to contestant room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#381fcf6d-45da-4ae9-8ee9-82a056200a3b > .test-code.collapse">Code</button>
              <span class="test-duration medium">49 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    <span class="hljs-comment">// listen for Contestant update</span><br>    cc.on(<span class="hljs-string">'testMessage'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        m.should.equal(<span class="hljs-string">'test'</span>);<br>        done();<br>    });<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.true();<br>        helper.sendMessageToContestants(sessionId, <span class="hljs-string">'testMessage'</span>, <span class="hljs-string">'test'</span>);<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="e7756b5c-3e31-4a78-8f46-b01479038875" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should subscribe contestant to observer room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#e7756b5c-3e31-4a78-8f46-b01479038875 > .test-code.collapse">Code</button>
              <span class="test-duration medium">56 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    <span class="hljs-comment">// listen for observer update</span><br>    cc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-comment">// Hack: this event may fire twice</span><br>        helper.closeClients();<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        om.should.not.be.null();<br>        done();<br>    });<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.true();<br>        helper.forceObserveUpdate(sessionId);<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="90334cd6-75cc-43f4-923a-9ffc7359750f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#90334cd6-75cc-43f4-923a-9ffc7359750f > .test-code.collapse">Code</button>
              <span class="test-duration medium">48 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = idUtility.generateSessionId();<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.false();<br>        rm.failedRequestReason.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="49aad4eb-c61d-4730-b864-bf407d7bf24d" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#49aad4eb-c61d-4730-b864-bf407d7bf24d > .test-code.collapse">Code</button>
              <span class="test-duration medium">48 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.getLatestSession().complete();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.false();<br>        rm.failedRequestReason.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="27d8bf1c-132a-423a-a8bf-548b5f949f6a" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when username is taken
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#27d8bf1c-132a-423a-a8bf-548b5f949f6a > .test-code.collapse">Code</button>
              <span class="test-duration medium">63 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">2</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    helper.contestantJoin(cc1, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>        <span class="hljs-comment">// Join</span><br>        <span class="hljs-keyword">var</span> rm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>        rm.sessionId = sessionId;<br>        rm.username = <span class="hljs-string">'username'</span>;<br>        cc2.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) </span>{<br>            <span class="hljs-keyword">var</span> responseMessage = messageFactory.restore(message, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            responseMessage.should.not.be.null();<br>            responseMessage.wasSuccessful.should.be.false();<br>            responseMessage.failedRequestReason.should.equal(constants.messages.USERNAME_TAKEN);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="6ebc4dff-98a6-4480-b73a-e94ad10edd62" class="suite has-suites has-tests has-passed">
            <h3 class="suite-title">with teams</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="6ebc4dff-98a6-4480-b73a-e94ad10edd62" class="suite-chart" width="50" height="50" data-total-passes="10" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">407 ms</li>
                <li class="suite-summary-item tests">10</li>
                <li class="suite-summary-item passed">10</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#6ebc4dff-98a6-4480-b73a-e94ad10edd62-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="6ebc4dff-98a6-4480-b73a-e94ad10edd62-test-list" class="list-group test-list collapse in">
                    <div id="234a31a5-e912-4ef5-b721-f1f2a670f541" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#234a31a5-e912-4ef5-b721-f1f2a670f541 > .test-code.collapse">Code</button>
              <span class="test-duration medium">41 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.true();<br>        rm.contestantId.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="618bd20e-3784-49fa-94f8-83fa1079ac4f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#618bd20e-3784-49fa-94f8-83fa1079ac4f > .test-code.collapse">Code</button>
              <span class="test-duration medium">52 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        om.should.not.be.null();<br>        om.gameState.contestants.length.should.equal(<span class="hljs-number">1</span>);<br>        om.gameState.contestants[<span class="hljs-number">0</span>].username.should.equal(<span class="hljs-string">'Test Person'</span>);<br>        om.gameState.teams.length.should.equal(<span class="hljs-number">1</span>);<br>        om.gameState.teams[<span class="hljs-number">0</span>].contestants.length.should.equal(<span class="hljs-number">1</span>);<br>        om.gameState.teams[<span class="hljs-number">0</span>].contestants[<span class="hljs-number">0</span>].username.should.equal(<span class="hljs-string">'Test Person'</span>);<br>        done();<br>    });<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'Test Person'</span>, rm.sessionId);<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="bcd47aa8-6083-4674-9117-a0ee3b8814ee" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is full
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#bcd47aa8-6083-4674-9117-a0ee3b8814ee > .test-code.collapse">Code</button>
              <span class="test-duration medium">56 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">responseMessage</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rm1 = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rm1.sessionId = responseMessage.sessionId;<br>    rm1.username = <span class="hljs-string">'TP1'</span>;<br>    <span class="hljs-keyword">var</span> rm2 = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rm2.sessionId = responseMessage.sessionId;<br>    rm2.username = <span class="hljs-string">'TP2'</span>;<br>    <span class="hljs-comment">// Contestant 1 join</span><br>    cc1.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rm1, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m1</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm1 = messageFactory.restore(m1, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm1.wasSuccessful.should.be.true();<br>        <span class="hljs-comment">// Contestant 2 join</span><br>        cc2.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rm2, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m2</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm2 = messageFactory.restore(m2, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            rm2.wasSuccessful.should.be.false();<br>            rm2.failedRequestReason.should.equal(constants.messages.TEAMS_ARE_FULL);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="9df0d32d-3bd0-4844-9cfc-c3a6e0b853e6" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should subscribe contestant to contestant room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#9df0d32d-3bd0-4844-9cfc-c3a6e0b853e6 > .test-code.collapse">Code</button>
              <span class="test-duration medium">43 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    <span class="hljs-comment">// listen for Contestant update</span><br>    cc.on(<span class="hljs-string">'testMessage'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        m.should.equal(<span class="hljs-string">'test'</span>);<br>        done();<br>    });<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.true();<br>        helper.sendMessageToContestants(sessionId, <span class="hljs-string">'testMessage'</span>, <span class="hljs-string">'test'</span>);<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="e8bb8b56-e196-4b17-8c42-d41bc4d6e369" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should subscribe contestant to observer room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#e8bb8b56-e196-4b17-8c42-d41bc4d6e369 > .test-code.collapse">Code</button>
              <span class="test-duration medium">42 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    <span class="hljs-comment">// listen for observer update</span><br>    cc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-comment">// Hack: this event may fire twice</span><br>        helper.closeClients();<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        om.should.not.be.null();<br>        done();<br>    });<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.true();<br>        helper.forceObserveUpdate(sessionId);<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="2eedeeaf-be5f-4c98-852d-71a53cc7b0e3" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#2eedeeaf-be5f-4c98-852d-71a53cc7b0e3 > .test-code.collapse">Code</button>
              <span class="test-duration fast">26 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = idUtility.generateSessionId();<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.false();<br>        rm.failedRequestReason.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="44788713-b663-4027-a2bd-1d07122b62f8" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#44788713-b663-4027-a2bd-1d07122b62f8 > .test-code.collapse">Code</button>
              <span class="test-duration medium">46 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.getLatestSession().complete();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.should.not.be.null();<br>        rm.wasSuccessful.should.be.false();<br>        rm.failedRequestReason.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="7f600a46-2b04-4aad-b968-9947d2b3e80d" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when username is taken
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#7f600a46-2b04-4aad-b968-9947d2b3e80d > .test-code.collapse">Code</button>
              <span class="test-duration medium">48 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    helper.contestantJoin(cc1, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>        <span class="hljs-comment">// Join</span><br>        <span class="hljs-keyword">var</span> rm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>        rm.sessionId = sessionId;<br>        rm.username = <span class="hljs-string">'username'</span>;<br>        cc2.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) </span>{<br>            <span class="hljs-keyword">var</span> responseMessage = messageFactory.restore(message, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            responseMessage.should.not.be.null();<br>            responseMessage.wasSuccessful.should.be.false();<br>            responseMessage.failedRequestReason.should.equal(constants.messages.USERNAME_TAKEN);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="be5d1cf4-2366-4f99-9201-0e03e819c575" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should inquire about team leader position
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#be5d1cf4-2366-4f99-9201-0e03e819c575 > .test-code.collapse">Code</button>
              <span class="test-duration fast">31 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="4b5b659c-d95f-4179-bf53-ad7ffeed4989" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not inquire about team leader position
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#4b5b659c-d95f-4179-bf53-ad7ffeed4989 > .test-code.collapse">Code</button>
              <span class="test-duration fast">22 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.false();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
              <section class="suite-wrap">
          <div id="c1cf23b7-71d0-4d3a-8610-f6a62e81e62e" class="suite has-tests has-passed">
            <h3 class="suite-title">when team leader selection method is RANDOM</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="c1cf23b7-71d0-4d3a-8610-f6a62e81e62e" class="suite-chart" width="50" height="50" data-total-passes="2" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">79 ms</li>
                <li class="suite-summary-item tests">2</li>
                <li class="suite-summary-item passed">2</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#c1cf23b7-71d0-4d3a-8610-f6a62e81e62e-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="c1cf23b7-71d0-4d3a-8610-f6a62e81e62e-test-list" class="list-group test-list collapse in">
                    <div id="74b74b9a-5e51-4d31-8047-25bd830eb2e4" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should fulfill team leader position when team is full
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#74b74b9a-5e51-4d31-8047-25bd830eb2e4 > .test-code.collapse">Code</button>
              <span class="test-duration medium">47 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>    helper.contestantJoin(cc1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(cc2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> t = s.teams.all[<span class="hljs-number">0</span>];<br>            t.teamLeader.username.should.equalOneOf(<span class="hljs-string">'c1'</span>, <span class="hljs-string">'c2'</span>);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="be27aa3c-8370-420d-b1e7-2f4ebe484c1e" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not fulfill team leader position when team is not full
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#be27aa3c-8370-420d-b1e7-2f4ebe484c1e > .test-code.collapse">Code</button>
              <span class="test-duration fast">32 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">3</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>    helper.contestantJoin(cc1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(cc2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> t = s.teams.all[<span class="hljs-number">0</span>];<br>            should(t.teamLeader).be.null();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="1fe4807e-70c9-4d22-b09c-02d6078ff80e" class="suite has-tests has-passed">
            <h3 class="suite-title">when team selection method is PLAYER_CHOICE</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="1fe4807e-70c9-4d22-b09c-02d6078ff80e" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">208 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#1fe4807e-70c9-4d22-b09c-02d6078ff80e-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="1fe4807e-70c9-4d22-b09c-02d6078ff80e-test-list" class="list-group test-list collapse in">
                    <div id="2f8c3e35-f456-4e73-b617-aef36082e027" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should respond with a list of teams
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#2f8c3e35-f456-4e73-b617-aef36082e027 > .test-code.collapse">Code</button>
              <span class="test-duration fast">29 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">3</span>;<br>s.teamSize = <span class="hljs-number">3</span>;<br>s.teamSelectionMethod = constants.teamSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.wasSuccessful.should.be.false();<br>        rm.mustChooseTeam.should.be.true();<br>        rm.teams.should.be.Array();<br>        rm.teams.length.should.equal(<span class="hljs-number">3</span>);<br>        helper.getLatestSession().contestants.length.should.equal(<span class="hljs-number">0</span>);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="a1566b13-fa30-4ff4-86ba-00244a6a3c42" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should all when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#a1566b13-fa30-4ff4-86ba-00244a6a3c42 > .test-code.collapse">Code</button>
              <span class="test-duration medium">50 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">3</span>;<br>s.teamSize = <span class="hljs-number">3</span>;<br>s.teamSelectionMethod = constants.teamSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = rm.sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.wasSuccessful.should.be.false();<br>        rqm.teamName = rm.teams[<span class="hljs-number">1</span>];<br>        cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            rm.wasSuccessful.should.be.true();<br>            should(rm.contestantId).not.be.null();<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> t = session.teams.getByTeamName(rqm.teamName);<br>            t.contestants.length.should.equal(<span class="hljs-number">1</span>);<br>            t.contestants.all[<span class="hljs-number">0</span>].id.should.equal(rm.contestantId);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="78f46eec-a42f-46e4-83c8-2e61e48d684a" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not over fill a team
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#78f46eec-a42f-46e4-83c8-2e61e48d684a > .test-code.collapse">Code</button>
              <span class="test-duration slow">129 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">2</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamSelectionMethod = constants.teamSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.wasSuccessful.should.be.false();<br>        rqm.teamName = rm.teams[<span class="hljs-number">1</span>];<br>        <span class="hljs-comment">// Fill the spot</span><br>        <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>        <span class="hljs-keyword">var</span> rqm2 = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>        rqm2.sessionId = sessionId;<br>        rqm2.username = <span class="hljs-string">'Test Person2'</span>;<br>        rqm2.teamName = rqm.teamName;<br>        cc2.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm2, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            rm.wasSuccessful.should.be.true();<br>            <span class="hljs-comment">// Try join full team</span><br>            cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>                rm.wasSuccessful.should.be.false();<br>                rm.failedRequestReason.should.equal(constants.messages.TEAMS_ARE_FULL);<br>                done();<br>            });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="e389b985-ca5f-4701-889f-674f932fc420" class="suite has-tests has-passed">
            <h3 class="suite-title">rejoin</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="e389b985-ca5f-4701-889f-674f932fc420" class="suite-chart" width="50" height="50" data-total-passes="4" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">178 ms</li>
                <li class="suite-summary-item tests">4</li>
                <li class="suite-summary-item passed">4</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#e389b985-ca5f-4701-889f-674f932fc420-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="e389b985-ca5f-4701-889f-674f932fc420-test-list" class="list-group test-list collapse in">
                    <div id="a01976eb-ba20-46f3-a507-cc0b28186bbe" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid and subscribe contestant to the observer room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#a01976eb-ba20-46f3-a507-cc0b28186bbe > .test-code.collapse">Code</button>
              <span class="test-duration medium">42 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    helper.contestantJoin(cc, <span class="hljs-string">'test user'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        cc.disconnect();<br>        cc = helper.createClient();<br>        <span class="hljs-comment">// listen for observer update</span><br>        cc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-comment">// Hack: this event may fire twice</span><br>            helper.closeClients();<br>            <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>            om.should.not.be.null();<br>            done();<br>        });<br>        <span class="hljs-comment">// Rejoin</span><br>        <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>        rqm.sessionId = sessionId;<br>        rqm.participantId = contestantId;<br>        rqm.rejoinAs = constants.rejoinAs.CONTESTANT;<br>        cc.emit(messageConstants.REJOIN_SESSION, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="3f55656c-a6df-4843-83a2-36d6eb26851f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#3f55656c-a6df-4843-83a2-36d6eb26851f > .test-code.collapse">Code</button>
              <span class="test-duration medium">41 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    helper.contestantJoin(cc, <span class="hljs-string">'test user'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        cc.disconnect();<br>        cc = helper.createClient();<br>        <span class="hljs-comment">// Rejoin</span><br>        <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>        rqm.sessionId = idUtility.generateSessionId();<br>        rqm.participantId = contestantId;<br>        rqm.rejoinAs = constants.rejoinAs.CONTESTANT;<br>        cc.emit(messageConstants.REJOIN_SESSION, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="85e49e67-8766-4a33-a741-5b7a3918e758" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#85e49e67-8766-4a33-a741-5b7a3918e758 > .test-code.collapse">Code</button>
              <span class="test-duration medium">47 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    helper.contestantJoin(cc, <span class="hljs-string">'test user'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        cc.disconnect();<br>        cc = helper.createClient();<br>        <span class="hljs-comment">// Rejoin</span><br>        <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>        rqm.sessionId = sessionId;<br>        rqm.participantId = contestantId;<br>        rqm.rejoinAs = constants.rejoinAs.CONTESTANT;<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.complete();<br>        cc.emit(messageConstants.REJOIN_SESSION, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="05dc2121-79f9-4a92-a8e1-19c908a24fa4" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should flag host as not disconnected
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#05dc2121-79f9-4a92-a8e1-19c908a24fa4 > .test-code.collapse">Code</button>
              <span class="test-duration medium">48 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    helper.contestantJoin(cc, <span class="hljs-string">'test user'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        cc.disconnect();<br>        cc = helper.createClient();<br>        <span class="hljs-comment">// Rejoin</span><br>        <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>        rqm.sessionId = sessionId;<br>        rqm.participantId = contestantId;<br>        rqm.rejoinAs = constants.rejoinAs.CONTESTANT;<br>        cc.emit(messageConstants.REJOIN_SESSION, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> c = session.contestants.find(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>) </span>{<br>                <span class="hljs-keyword">return</span> c.id === contestantId;<br>            });<br>            c.isDisconnected.should.be.false();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="a73f108a-ec63-4020-813a-c71041adb1d1" class="suite has-tests has-passed">
            <h3 class="suite-title">on disconnect</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="a73f108a-ec63-4020-813a-c71041adb1d1" class="suite-chart" width="50" height="50" data-total-passes="1" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">28 ms</li>
                <li class="suite-summary-item tests">1</li>
                <li class="suite-summary-item passed">1</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#a73f108a-ec63-4020-813a-c71041adb1d1-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="a73f108a-ec63-4020-813a-c71041adb1d1-test-list" class="list-group test-list collapse in">
                    <div id="e9b41296-37e9-4fee-baab-a6fdd7280818" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#e9b41296-37e9-4fee-baab-a6fdd7280818 > .test-code.collapse">Code</button>
              <span class="test-duration fast">28 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        <span class="hljs-keyword">if</span> (om.gameState.contestants.length &gt; <span class="hljs-number">0</span> &amp;&amp; om.gameState.contestants[<span class="hljs-number">0</span>].disconnected) {<br>            done();<br>        }<br>    });<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'test user'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        cc.disconnect();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="4f9c6c50-95a2-4fd6-80ab-7be8cf48f35a" class="suite has-tests has-passed">
            <h3 class="suite-title">team leader inquiry response</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="4f9c6c50-95a2-4fd6-80ab-7be8cf48f35a" class="suite-chart" width="50" height="50" data-total-passes="6" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">188 ms</li>
                <li class="suite-summary-item tests">6</li>
                <li class="suite-summary-item passed">6</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#4f9c6c50-95a2-4fd6-80ab-7be8cf48f35a-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="4f9c6c50-95a2-4fd6-80ab-7be8cf48f35a-test-list" class="list-group test-list collapse in">
                    <div id="d6bae330-36d5-4475-b129-b35ee80c4fc3" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should set team leader
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#d6bae330-36d5-4475-b129-b35ee80c4fc3 > .test-code.collapse">Code</button>
              <span class="test-duration fast">29 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        rqm = messageFactory.create(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE);<br>        rqm.sessionId = sessionId;<br>        rqm.contestantId = rm.contestantId;<br>        rqm.decision = <span class="hljs-literal">true</span>;<br>        cc.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> t = s.teams.all[<span class="hljs-number">0</span>];<br>            t.teamLeader.username.should.equal(<span class="hljs-string">'Test Person'</span>);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="b6b61264-e36f-4632-a021-1c9476174049" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not set team leader
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#b6b61264-e36f-4632-a021-1c9476174049 > .test-code.collapse">Code</button>
              <span class="test-duration fast">27 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        rqm = messageFactory.create(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE);<br>        rqm.sessionId = sessionId;<br>        rqm.contestantId = rm.contestantId;<br>        rqm.decision = <span class="hljs-literal">false</span>;<br>        cc.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> t = s.teams.all[<span class="hljs-number">0</span>];<br>            should(t.teamLeader).be.null();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="cfafb091-5acf-4292-a7b1-92bc9078d645" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#cfafb091-5acf-4292-a7b1-92bc9078d645 > .test-code.collapse">Code</button>
              <span class="test-duration fast">26 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        rqm = messageFactory.create(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE);<br>        rqm.sessionId = idUtility.generateSessionId();<br>        rqm.contestantId = rm.contestantId;<br>        rqm.decision = <span class="hljs-literal">true</span>;<br>        cc.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>            rm.should.not.be.null();<br>            rm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="4695a0fe-6137-4099-a665-2fa4528f7e89" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#4695a0fe-6137-4099-a665-2fa4528f7e89 > .test-code.collapse">Code</button>
              <span class="test-duration fast">31 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        rqm = messageFactory.create(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE);<br>        rqm.sessionId = sessionId;<br>        rqm.contestantId = rm.contestantId;<br>        rqm.decision = <span class="hljs-literal">true</span>;<br>        helper.getLatestSession().complete();<br>        cc.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>            rm.should.not.be.null();<br>            rm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="2b18f5ff-c12a-482c-b456-3023a52155b3" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when contestant does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#2b18f5ff-c12a-482c-b456-3023a52155b3 > .test-code.collapse">Code</button>
              <span class="test-duration fast">25 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        rqm = messageFactory.create(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE);<br>        rqm.sessionId = sessionId;<br>        rqm.contestantId = idUtility.generateParticipantId();<br>        rqm.decision = <span class="hljs-literal">true</span>;<br>        cc.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_LEADER_RESPONSE_NOT_CONTESTANT);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="e6a66db7-c66c-412e-8a72-66e01f32f677" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not set team leader when position fulfilled (aka race condition)
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#e6a66db7-c66c-412e-8a72-66e01f32f677 > .test-code.collapse">Code</button>
              <span class="test-duration medium">50 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.PLAYER_CHOICE;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc1.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        rm.enquireForTeamLeaderPosition.should.be.true();<br>        <span class="hljs-keyword">var</span> cc1Id = rm.contestantId;<br>        helper.contestantJoin(cc2, <span class="hljs-string">'Test Person2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>            rm.enquireForTeamLeaderPosition.should.be.true();<br>            rqm = messageFactory.create(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE);<br>            rqm.sessionId = sessionId;<br>            rqm.contestantId = rm.contestantId;<br>            rqm.decision = <span class="hljs-literal">true</span>;<br>            cc2.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>                sm.should.not.be.null();<br>                rqm.contestantId = cc1Id;<br>                cc1.emit(messageConstants.INQUIRE_TEAM_LEADER_RESPONSE_MESSAGE, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.COULD_NOT_PROMOTE_TO_TEAM_LEADER_POSITION_FULFILLED);<br>                    done();<br>                });<br>            });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="e79700c2-7fce-48ad-96e9-24a6c3096749" class="suite has-tests has-passed">
            <h3 class="suite-title">buzzerPress</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="e79700c2-7fce-48ad-96e9-24a6c3096749" class="suite-chart" width="50" height="50" data-total-passes="5" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">156 ms</li>
                <li class="suite-summary-item tests">5</li>
                <li class="suite-summary-item passed">5</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#e79700c2-7fce-48ad-96e9-24a6c3096749-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="e79700c2-7fce-48ad-96e9-24a6c3096749-test-list" class="list-group test-list collapse in">
                    <div id="8c726da4-94f5-4ab2-827d-e5f91e3175a2" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when state is ready
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#8c726da4-94f5-4ab2-827d-e5f91e3175a2 > .test-code.collapse">Code</button>
              <span class="test-duration fast">26 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="93e24593-2efb-4364-9d0d-91f366a9e3b6" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should ignore when state is not ready
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#93e24593-2efb-4364-9d0d-91f366a9e3b6 > .test-code.collapse">Code</button>
              <span class="test-duration medium">42 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">2</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc1 = helper.createClient();<br>    helper.contestantJoin(cc1, <span class="hljs-string">'username1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc1.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            <span class="hljs-keyword">var</span> cc2 = helper.createClient();<br>            helper.contestantJoin(cc2, <span class="hljs-string">'username2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>                bpm.sessionId = sessionId;<br>                bpm.contestantId = rm.contestantId;<br>                cc1.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.BUZZER_PRESS_NOT_ACCEPTED);<br>                    done();<br>                });<br>            });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="217f17c0-f215-4637-ae19-7e197affaa06" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#217f17c0-f215-4637-ae19-7e197affaa06 > .test-code.collapse">Code</button>
              <span class="test-duration fast">35 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        helper.getLatestSession().complete();<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.ERROR);<br>            sm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="442efabd-b120-4386-a8f6-b31418050f83" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#442efabd-b120-4386-a8f6-b31418050f83 > .test-code.collapse">Code</button>
              <span class="test-duration fast">28 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = idUtility.generateSessionId();<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.ERROR);<br>            sm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="3161caae-3d14-4585-ad97-02a5423727f0" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when contestant does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#3161caae-3d14-4585-ad97-02a5423727f0 > .test-code.collapse">Code</button>
              <span class="test-duration fast">25 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = idUtility.generateParticipantId();<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.ERROR);<br>            sm.error.should.equal(constants.messages.COULD_NOT_ACCEPT_BUZZER_PRESS_NOT_CONTESTANT);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="0d9712e6-18da-4b1f-9e7b-2d0cd7c7afc3" class="suite has-tests has-passed">
            <h3 class="suite-title">team name change request</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="0d9712e6-18da-4b1f-9e7b-2d0cd7c7afc3" class="suite-chart" width="50" height="50" data-total-passes="10" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">294 ms</li>
                <li class="suite-summary-item tests">10</li>
                <li class="suite-summary-item passed">10</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#0d9712e6-18da-4b1f-9e7b-2d0cd7c7afc3-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="0d9712e6-18da-4b1f-9e7b-2d0cd7c7afc3-test-list" class="list-group test-list collapse in">
                    <div id="8ff729f9-ed83-4a05-b2d1-5b4d3f1ea563" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#8ff729f9-ed83-4a05-b2d1-5b4d3f1ea563 > .test-code.collapse">Code</button>
              <span class="test-duration medium">44 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            session.teams.all[<span class="hljs-number">0</span>].teamName.should.equal(<span class="hljs-string">'New team name'</span>);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="e0ec36e4-62b1-493e-86c9-47d3ab8f5c99" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when team name is already used
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#e0ec36e4-62b1-493e-86c9-47d3ab8f5c99 > .test-code.collapse">Code</button>
              <span class="test-duration fast">26 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">2</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        <span class="hljs-keyword">var</span> contestant = session.contestants[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">var</span> team = session.teams.getByContestant(contestant);<br>        <span class="hljs-keyword">var</span> otherTeam = session.teams.all.filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>) </span>{<br>            <span class="hljs-keyword">return</span> t !== team;<br>        })[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = otherTeam.teamName;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_NAME_IN_USE);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="03e49036-5962-4bf6-80c9-f9176df4bdfd" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it when team name does not change
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#03e49036-5962-4bf6-80c9-f9176df4bdfd > .test-code.collapse">Code</button>
              <span class="test-duration fast">25 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        <span class="hljs-keyword">var</span> contestant = session.contestants[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">var</span> team = session.teams.getByContestant(contestant);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = team.teamName;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="d7e60b83-aa3f-4204-baa6-67f1df634fe2" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when not team leader
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#d7e60b83-aa3f-4204-baa6-67f1df634fe2 > .test-code.collapse">Code</button>
              <span class="test-duration fast">34 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_NAME_REQUEST_NOT_CONTESTANT_TEAM_OR_TEAM_LEADER);<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            session.teams.all[<span class="hljs-number">0</span>].teamName.should.not.equal(<span class="hljs-string">'New team name'</span>);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="07af6882-a33d-47f2-b4fc-050e3b9bbab8" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#07af6882-a33d-47f2-b4fc-050e3b9bbab8 > .test-code.collapse">Code</button>
              <span class="test-duration fast">24 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = idUtility.generateSessionId();<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="693f3d7f-8e48-46dd-97db-f8556175e820" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when contestant does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#693f3d7f-8e48-46dd-97db-f8556175e820 > .test-code.collapse">Code</button>
              <span class="test-duration fast">25 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = idUtility.generateParticipantId();<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_NAME_REQUEST_NOT_CONTESTANT_TEAM_OR_TEAM_LEADER);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="6f8385e5-466a-4289-9674-2acabf3399fa" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session is complete
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#6f8385e5-466a-4289-9674-2acabf3399fa > .test-code.collapse">Code</button>
              <span class="test-duration fast">27 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.complete();<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="5728c9e1-4247-4b70-8022-8ce626f19bb1" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when setting do not allow it
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#5728c9e1-4247-4b70-8022-8ce626f19bb1 > .test-code.collapse">Code</button>
              <span class="test-duration fast">37 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.MANUAL;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_NAME_SETTINGS_NOT_ALLOW);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="5a141e69-c060-4809-b63d-b45fcf90de77" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when team name contains profanity
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#5a141e69-c060-4809-b63d-b45fcf90de77 > .test-code.collapse">Code</button>
              <span class="test-duration fast">25 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'The word penis is funny #YOLO'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>            em.should.not.be.null();<br>            em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_NAME_CONTAINS_PROFANITY);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="0be6b111-91ff-40ee-9951-9e2c39316e5e" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers when accepted
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#0be6b111-91ff-40ee-9951-9e2c39316e5e > .test-code.collapse">Code</button>
              <span class="test-duration fast">27 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-comment">// Join</span><br>    <span class="hljs-keyword">var</span> rqm = messageFactory.create(messageConstants.CONTESTANT_JOIN_REQUEST);<br>    rqm.sessionId = sessionId;<br>    rqm.username = <span class="hljs-string">'Test Person'</span>;<br>    cc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        <span class="hljs-keyword">if</span> (om.gameState.teams &amp;&amp; om.gameState.teams.length) {<br>            <span class="hljs-keyword">if</span> (om.gameState.teams[<span class="hljs-number">0</span>].teamName === <span class="hljs-string">'New team name'</span>) {<br>                done();<br>            }<br>        }<br>    });<br>    cc.emit(messageConstants.CONTESTANT_JOIN_REQUEST, rqm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.CONTESTANT_JOIN_RESPONSE);<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.contestantId = rm.contestantId;<br>        req.teamName = <span class="hljs-string">'New team name'</span>;<br>        cc.emit(messageConstants.SET_TEAM_NAME_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>            sm.should.not.be.null();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="2179b5d3-8e52-4c96-a4b8-ad3c0b09ccde" class="suite has-tests has-passed">
            <h3 class="suite-title">info request</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerContestantTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="2179b5d3-8e52-4c96-a4b8-ad3c0b09ccde" class="suite-chart" width="50" height="50" data-total-passes="5" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">150 ms</li>
                <li class="suite-summary-item tests">5</li>
                <li class="suite-summary-item passed">5</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#2179b5d3-8e52-4c96-a4b8-ad3c0b09ccde-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="2179b5d3-8e52-4c96-a4b8-ad3c0b09ccde-test-list" class="list-group test-list collapse in">
                    <div id="a7959880-dc2d-44e6-9140-f91fe388ffd9" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should return in a valid state for individuals contestant
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#a7959880-dc2d-44e6-9140-f91fe388ffd9 > .test-code.collapse">Code</button>
              <span class="test-duration fast">29 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.participantId = contestantId;<br>        cc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> irm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>            irm.should.not.be.null();<br>            should(irm.info).not.be.null();<br>            should(irm.info.host).be.null();<br>            should(irm.info.contestant).not.be.null();<br>            should(irm.info.team).be.null();<br>            should(irm.info.session).not.be.null();<br>            should(irm.info.sessionState).be.equal(<span class="hljs-string">'ready'</span>);<br>            should(irm.info.isObserver).be.false();<br>            should(irm.info.isHost).be.false();<br>            should(irm.info.isContestant).be.true();<br>            should(irm.info.isSessionCompleted).be.false();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="261a429b-9165-467a-9e52-ca18993bc2dc" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should return in a valid state for teams contestant
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#261a429b-9165-467a-9e52-ca18993bc2dc > .test-code.collapse">Code</button>
              <span class="test-duration fast">27 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">3</span>;<br>s.teamSize = <span class="hljs-number">3</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.participantId = contestantId;<br>        cc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> rm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>            rm.should.not.be.null();<br>            should(rm.info).not.be.null();<br>            should(rm.info.host).be.null();<br>            should(rm.info.contestant).not.be.null();<br>            should(rm.info.team).not.be.null();<br>            should(rm.info.session).not.be.null();<br>            should(rm.info.sessionState).be.equal(<span class="hljs-string">'ready'</span>);<br>            should(rm.info.isObserver).be.false();<br>            should(rm.info.isHost).be.false();<br>            should(rm.info.isContestant).be.true();<br>            should(rm.info.isSessionCompleted).be.false();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="f1bc2fce-76b6-49da-808f-c9d4862e9f6a" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#f1bc2fce-76b6-49da-808f-c9d4862e9f6a > .test-code.collapse">Code</button>
              <span class="test-duration fast">25 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>        req.sessionId = idUtility.generateSessionId();<br>        req.participantId = contestantId;<br>        cc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>            em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="f231dc37-d8ab-4a60-831d-86cfb52e7c94" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when contestant does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#f231dc37-d8ab-4a60-831d-86cfb52e7c94 > .test-code.collapse">Code</button>
              <span class="test-duration fast">27 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.participantId = idUtility.generateParticipantId();<br>        cc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>            em.error.should.equal(constants.messages.COULD_NOT_PROCESS_REQUEST_CONTESTANT_OR_HOST_NOT_FOUND);<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="5f0d57fd-5d93-48ff-9855-346bbe965451" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when session is complete
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#5f0d57fd-5d93-48ff-9855-346bbe965451 > .test-code.collapse">Code</button>
              <span class="test-duration medium">42 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> contestantId = rm.contestantId;<br>        <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>        req.sessionId = sessionId;<br>        req.participantId = contestantId;<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.complete();<br>        cc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> irm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>            irm.should.not.be.null();<br>            done();<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
        
          </div>
        </section>
            <section class="suite-wrap">
          <div id="f4d1deec-5537-460f-bf6c-77ed064bbf70" class="suite has-suites">
            <h3 class="suite-title">Buzzer server</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
        
              <section class="suite-wrap">
          <div id="291ff8c8-b117-4b68-9e89-658d50ba6945" class="suite has-suites">
            <h3 class="suite-title">host</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
        
              <section class="suite-wrap">
          <div id="1c8360b6-04ae-454a-ae74-25793af5e5d3" class="suite has-suites">
            <h3 class="suite-title">create</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
        
              <section class="suite-wrap">
          <div id="356e9b41-e49b-407b-8de1-0098e3e6fcea" class="suite has-tests has-passed">
            <h3 class="suite-title">session</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="356e9b41-e49b-407b-8de1-0098e3e6fcea" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">37 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#356e9b41-e49b-407b-8de1-0098e3e6fcea-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="356e9b41-e49b-407b-8de1-0098e3e6fcea-test-list" class="list-group test-list collapse in">
                    <div id="d5754017-85e1-4a5a-99e7-bc53bed8afdc" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid and create a session
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#d5754017-85e1-4a5a-99e7-bc53bed8afdc > .test-code.collapse">Code</button>
              <span class="test-duration fast">13 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> csm = messageFactory.create(messageConstants.CREATE_SESSION);<br>csm.settings = s;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>c.emit(messageConstants.CREATE_SESSION, csm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>    m.should.be.Object();<br>    m.type.should.equal(messageConstants.CREATE_SESSION_RESPONSE);<br>    helper.sessions.all.length.should.equal(<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    session.complete();<br>    <span class="hljs-keyword">var</span> rsm = messageFactory.restore(m, messageConstants.CREATE_SESSION_RESPONSE);<br>    rsm.sessionId.should.equal(session.id);<br>    rsm.hostId.should.equal(session.host.id);<br>    done();<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="e3cdd228-25a0-4ce1-a906-96287cf6fe4a" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should subscribe host to the observer room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#e3cdd228-25a0-4ce1-a906-96287cf6fe4a > .test-code.collapse">Code</button>
              <span class="test-duration fast">14 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br><span class="hljs-comment">// listen for observer update</span><br>c.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>    <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>    om.should.not.be.null();<br>    done();<br>});<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    rm.should.not.be.null();<br>    <span class="hljs-comment">// force observer update</span><br>    helper.forceObserveUpdate(rm.sessionId);<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="5769e8fd-3c00-42df-b81e-03698f939bd6" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when settings are not valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#5769e8fd-3c00-42df-b81e-03698f939bd6 > .test-code.collapse">Code</button>
              <span class="test-duration fast">10 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br><span class="hljs-keyword">var</span> [r, e] = s.validate();<br>r.should.be.false();<br><span class="hljs-keyword">var</span> csm = messageFactory.create(messageConstants.CREATE_SESSION);<br>csm.settings = s;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>c.emit(messageConstants.CREATE_SESSION, csm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>    m.should.be.Object();<br>    m.type.should.equal(messageConstants.ERROR);<br>    helper.sessions.all.length.should.equal(<span class="hljs-number">0</span>);<br>    done();<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="753b37aa-7a71-4c47-b1f1-f65ad0d0da15" class="suite has-suites">
            <h3 class="suite-title">rejoin</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
        
              <section class="suite-wrap">
          <div id="64fcf324-1e81-42ef-8aeb-c5c4d1345dec" class="suite has-tests has-passed">
            <h3 class="suite-title">session</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="64fcf324-1e81-42ef-8aeb-c5c4d1345dec" class="suite-chart" width="50" height="50" data-total-passes="6" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">176 ms</li>
                <li class="suite-summary-item tests">6</li>
                <li class="suite-summary-item passed">6</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#64fcf324-1e81-42ef-8aeb-c5c4d1345dec-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="64fcf324-1e81-42ef-8aeb-c5c4d1345dec-test-list" class="list-group test-list collapse in">
                    <div id="2b5e5c19-0a7f-4eec-adfa-de79ad835dff" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#2b5e5c19-0a7f-4eec-adfa-de79ad835dff > .test-code.collapse">Code</button>
              <span class="test-duration fast">23 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    c.disconnect();<br>    c = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = rm.sessionId;<br>    rjm.participantId = rm.hostId;<br>    rjm.rejoinAs = constants.rejoinAs.HOST;<br>    c.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{<br>        data.type.should.equal(messageConstants.SUCCESS);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="266a26ab-04fd-4766-b443-79575f47fe09" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should subscribe host to observer room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#266a26ab-04fd-4766-b443-79575f47fe09 > .test-code.collapse">Code</button>
              <span class="test-duration fast">23 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    c.disconnect();<br>    c = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = rm.sessionId;<br>    rjm.participantId = rm.hostId;<br>    rjm.rejoinAs = constants.rejoinAs.HOST;<br>    <span class="hljs-comment">// listen for observer update</span><br>    c.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        om.should.not.be.null();<br>        done();<br>    });<br>    c.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{<br>        data.type.should.equal(messageConstants.SUCCESS);<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="ffc9f27c-c01f-4d84-8998-b8f0e2494e58" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when host id is invalid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#ffc9f27c-c01f-4d84-8998-b8f0e2494e58 > .test-code.collapse">Code</button>
              <span class="test-duration fast">24 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    c.disconnect();<br>    c = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = rm.sessionId;<br>    rjm.participantId = idUtility.generateParticipantId();<br>    rjm.rejoinAs = constants.rejoinAs.HOST;<br>    c.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.COULD_NOT_REJOIN_NOT_HOST);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="4896866e-89b7-4c48-8fa5-f6b1d31a04b5" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#4896866e-89b7-4c48-8fa5-f6b1d31a04b5 > .test-code.collapse">Code</button>
              <span class="test-duration medium">50 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    c.disconnect();<br>    c = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = idUtility.generateSessionId();<br>    rjm.participantId = rm.hostId;<br>    rjm.rejoinAs = constants.rejoinAs.HOST;<br>    c.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>        rm.should.not.be.null();<br>        rm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="5e38f5e9-879f-447a-bca3-ab8fd2d2096a" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#5e38f5e9-879f-447a-bca3-ab8fd2d2096a > .test-code.collapse">Code</button>
              <span class="test-duration fast">30 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    c.disconnect();<br>    c = helper.createClient();<br>    helper.getLatestSession().complete();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = rm.sessionId;<br>    rjm.participantId = rm.hostId;<br>    rjm.rejoinAs = constants.rejoinAs.HOST;<br>    c.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>        rm.should.not.be.null();<br>        rm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="fa4e11e6-f417-4b86-b1bf-481f986f8912" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should flag host as not disconnected
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#fa4e11e6-f417-4b86-b1bf-481f986f8912 > .test-code.collapse">Code</button>
              <span class="test-duration fast">26 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    c.disconnect();<br>    c = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = rm.sessionId;<br>    rjm.participantId = rm.hostId;<br>    rjm.rejoinAs = constants.rejoinAs.HOST;<br>    c.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{<br>        data.type.should.equal(messageConstants.SUCCESS);<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.host.isDisconnected.should.be.false();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="0ab7e6c6-c229-4f27-8848-36270158bb75" class="suite has-suites">
            <h3 class="suite-title">complete</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
        
              <section class="suite-wrap">
          <div id="d47ccb0f-01cc-459a-bf96-5a0e2c131c55" class="suite has-tests has-passed">
            <h3 class="suite-title">session</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="d47ccb0f-01cc-459a-bf96-5a0e2c131c55" class="suite-chart" width="50" height="50" data-total-passes="5" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">90 ms</li>
                <li class="suite-summary-item tests">5</li>
                <li class="suite-summary-item passed">5</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#d47ccb0f-01cc-459a-bf96-5a0e2c131c55-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="d47ccb0f-01cc-459a-bf96-5a0e2c131c55-test-list" class="list-group test-list collapse in">
                    <div id="0b49d4a1-acd7-45b7-96c6-edf70086c637" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#0b49d4a1-acd7-45b7-96c6-edf70086c637 > .test-code.collapse">Code</button>
              <span class="test-duration fast">16 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> scm = messageFactory.create(messageConstants.SESSION_COMPLETE);<br>    scm.sessionId = rm.sessionId;<br>    scm.hostId = rm.hostId;<br>    hc.emit(messageConstants.SESSION_COMPLETE, scm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.SUCCESS);<br>        rm.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="cb98a12f-ceec-44f6-ba55-1cc34c69bf24" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when host id is invalid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#cb98a12f-ceec-44f6-ba55-1cc34c69bf24 > .test-code.collapse">Code</button>
              <span class="test-duration fast">26 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> scm = messageFactory.create(messageConstants.SESSION_COMPLETE);<br>    scm.sessionId = rm.sessionId;<br>    scm.hostId = idUtility.generateParticipantId();<br>    hc.emit(messageConstants.SESSION_COMPLETE, scm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>        rm.should.not.be.null();<br>        rm.error.should.equal(constants.messages.COULD_NOT_COMPLETE_SESSION_NOT_HOST);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="883e01c7-2e4d-4277-b012-383e546cda6b" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session id is invalid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#883e01c7-2e4d-4277-b012-383e546cda6b > .test-code.collapse">Code</button>
              <span class="test-duration fast">16 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> scm = messageFactory.create(messageConstants.SESSION_COMPLETE);<br>    scm.sessionId = idUtility.generateSessionId();<br>    scm.hostId = rm.hostId;<br>    hc.emit(messageConstants.SESSION_COMPLETE, scm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>        rm.should.not.be.null();<br>        rm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="3bddc9c1-9f2c-4dce-bcb1-ce47d694d9d8" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is already completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#3bddc9c1-9f2c-4dce-bcb1-ce47d694d9d8 > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    helper.getLatestSession().complete();<br>    <span class="hljs-keyword">var</span> scm = messageFactory.create(messageConstants.SESSION_COMPLETE);<br>    scm.sessionId = rm.sessionId;<br>    scm.hostId = rm.hostId;<br>    hc.emit(messageConstants.SESSION_COMPLETE, scm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.ERROR);<br>        rm.should.not.be.null();<br>        rm.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="1ca259a3-24a2-427a-a4ab-0a6b62360f83" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should notify observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#1ca259a3-24a2-427a-a4ab-0a6b62360f83 > .test-code.collapse">Code</button>
              <span class="test-duration fast">14 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> scm = messageFactory.create(messageConstants.SESSION_COMPLETE);<br>    scm.sessionId = rm.sessionId;<br>    scm.hostId = rm.hostId;<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>        om.should.not.be.null();<br>        done();<br>    });<br>    hc.emit(messageConstants.SESSION_COMPLETE, scm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> rm = messageFactory.restore(m, messageConstants.SUCCESS);<br>        rm.should.not.be.null();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="ecc5cfd9-d25d-451a-9f27-27ff23630bd4" class="suite has-suites">
            <h3 class="suite-title">buzzer</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
        
              <section class="suite-wrap">
          <div id="11df65df-210a-484d-9899-e45a1cb10f94" class="suite has-suites has-tests has-passed">
            <h3 class="suite-title">action</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="11df65df-210a-484d-9899-e45a1cb10f94" class="suite-chart" width="50" height="50" data-total-passes="12" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">295 ms</li>
                <li class="suite-summary-item tests">12</li>
                <li class="suite-summary-item passed">12</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#11df65df-210a-484d-9899-e45a1cb10f94-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="11df65df-210a-484d-9899-e45a1cb10f94-test-list" class="list-group test-list collapse in">
                    <div id="33d6b7a2-0888-441f-be7d-e09d665c93f9" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow accept when valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#33d6b7a2-0888-441f-be7d-e09d665c93f9 > .test-code.collapse">Code</button>
              <span class="test-duration fast">32 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm,<br>            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                messageFactory.restore(m, messageConstants.SUCCESS);<br>                helper.getLatestSession().currentState.should<br>                    .equal(constants.gameStates.PENDING);<br>                <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                    messageConstants.BUZZER_ACTION_COMMAND<br>                );<br>                hrm.sessionId = sessionId;<br>                hrm.hostId = hostId;<br>                hrm.action = constants.buzzerActionCommands<br>                    .ACCEPT;<br>                hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                    hrm,<br>                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                        <span class="hljs-keyword">var</span> sm = messageFactory.restore(<br>                            rm, messageConstants.SUCCESS<br>                        );<br>                        sm.should.not.be.null();<br>                        helper.getLatestSession().currentState<br>                            .should.equal(constants.gameStates<br>                                .READY);<br>                        helper.getLatestSession().roundWinner<br>                            .should.equal(<span class="hljs-string">'username'</span>);<br>                        done();<br>                    });<br>            });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="23ed6d0f-d1d0-4eb3-81bc-d286d50b97d3" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow reject when valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#23ed6d0f-d1d0-4eb3-81bc-d286d50b97d3 > .test-code.collapse">Code</button>
              <span class="test-duration fast">34 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm,<br>            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                messageFactory.restore(m, messageConstants.SUCCESS);<br>                helper.getLatestSession().currentState.should<br>                    .equal(constants.gameStates.PENDING);<br>                <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                    messageConstants.BUZZER_ACTION_COMMAND<br>                );<br>                hrm.sessionId = sessionId;<br>                hrm.hostId = hostId;<br>                hrm.action = constants.buzzerActionCommands<br>                    .REJECT;<br>                hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                    hrm,<br>                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                        <span class="hljs-keyword">var</span> sm = messageFactory.restore(<br>                            rm, messageConstants.SUCCESS<br>                        );<br>                        sm.should.not.be.null();<br>                        helper.getLatestSession().currentState<br>                            .should.equal(constants.gameStates<br>                                .READY);<br>                        should(helper.getLatestSession()<br>                            .roundWinner).be.null();<br>                        done();<br>                    });<br>            });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="9ee42b70-86e6-4ffc-b23f-09e9cf437647" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow reset when valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#9ee42b70-86e6-4ffc-b23f-09e9cf437647 > .test-code.collapse">Code</button>
              <span class="test-duration fast">14 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> hrm = messageFactory.create(messageConstants.BUZZER_ACTION_COMMAND);<br>    hrm.sessionId = rm.sessionId;<br>    hrm.hostId = rm.hostId;<br>    hrm.action = constants.buzzerActionCommands.RESET;<br>    hc.emit(messageConstants.BUZZER_ACTION_COMMAND, hrm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="6a4278b7-3e4f-4efc-b9f4-ed1391d8d2b2" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow disable when valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#6a4278b7-3e4f-4efc-b9f4-ed1391d8d2b2 > .test-code.collapse">Code</button>
              <span class="test-duration fast">16 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    helper.hostBuzzerAction(hc, rm.sessionId, rm.hostId, constants.buzzerActionCommands<br>        .DISABLE,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sm</span>) </span>{<br>            sm.should.be.instanceOf(successMessage);<br>            helper.getLatestSession().currentState.should.equal(<br>                constants.gameStates.BUZZER_LOCK);<br>            done();<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="b1beea30-47ce-4fec-916f-1f274c4e4753" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow enable when valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#b1beea30-47ce-4fec-916f-1f274c4e4753 > .test-code.collapse">Code</button>
              <span class="test-duration fast">21 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    helper.hostBuzzerAction(hc, rm.sessionId, rm.hostId, constants.buzzerActionCommands<br>        .DISABLE,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sm</span>) </span>{<br>            sm.should.be.instanceOf(successMessage);<br>            helper.getLatestSession().currentState.should.equal(<br>                constants.gameStates.BUZZER_LOCK);<br>            helper.hostBuzzerAction(hc, rm.sessionId, rm.hostId,<br>                constants.buzzerActionCommands.ENABLE,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sm</span>) </span>{<br>                    sm.should.be.instanceOf(successMessage);<br>                    helper.getLatestSession().currentState.should<br>                        .equal(constants.gameStates.READY);<br>                    done();<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="1b1fd68c-97cc-42ae-ac30-259df34fd1e3" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow accept when state is not pending
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#1b1fd68c-97cc-42ae-ac30-259df34fd1e3 > .test-code.collapse">Code</button>
              <span class="test-duration fast">14 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> hrm = messageFactory.create(messageConstants.BUZZER_ACTION_COMMAND);<br>    hrm.sessionId = rm.sessionId;<br>    hrm.hostId = rm.hostId;<br>    hrm.action = constants.buzzerActionCommands.ACCEPT;<br>    hc.emit(messageConstants.BUZZER_ACTION_COMMAND, hrm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="bb2d3114-06ab-46e5-beb2-285764eef6a1" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow reject when state is not pending
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#bb2d3114-06ab-46e5-beb2-285764eef6a1 > .test-code.collapse">Code</button>
              <span class="test-duration fast">16 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> hrm = messageFactory.create(messageConstants.BUZZER_ACTION_COMMAND);<br>    hrm.sessionId = rm.sessionId;<br>    hrm.hostId = rm.hostId;<br>    hrm.action = constants.buzzerActionCommands.REJECT;<br>    hc.emit(messageConstants.BUZZER_ACTION_COMMAND, hrm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="9a0c01e1-afc6-4f31-a042-3f40ec747c1b" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow reset when game state is ready
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#9a0c01e1-afc6-4f31-a042-3f40ec747c1b > .test-code.collapse">Code</button>
              <span class="test-duration fast">27 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> hrm = messageFactory.create(messageConstants.BUZZER_ACTION_COMMAND);<br>    hrm.sessionId = rm.sessionId;<br>    hrm.hostId = rm.hostId;<br>    hrm.action = constants.buzzerActionCommands.RESET;<br>    hc.emit(messageConstants.BUZZER_ACTION_COMMAND, hrm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="0cec80d9-68ec-4db7-ba03-61292adb04c0" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow reset when game state is pending
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#0cec80d9-68ec-4db7-ba03-61292adb04c0 > .test-code.collapse">Code</button>
              <span class="test-duration fast">32 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm,<br>            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                messageFactory.restore(m, messageConstants.SUCCESS);<br>                helper.getLatestSession().currentState.should<br>                    .equal(constants.gameStates.PENDING);<br>                <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                    messageConstants.BUZZER_ACTION_COMMAND<br>                );<br>                hrm.sessionId = sessionId;<br>                hrm.hostId = hostId;<br>                hrm.action = constants.buzzerActionCommands<br>                    .RESET;<br>                hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                    hrm,<br>                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                        <span class="hljs-keyword">var</span> sm = messageFactory.restore(<br>                            rm, messageConstants.SUCCESS<br>                        );<br>                        sm.should.not.be.null();<br>                        helper.getLatestSession().currentState<br>                            .should.equal(constants.gameStates<br>                                .READY);<br>                        should.not.exist(helper.getLatestSession()<br>                            .roundWinner);<br>                        done();<br>                    });<br>            });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="731f5240-958b-4e8e-9b78-ab03fe28582e" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow response when host id is invalid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#731f5240-958b-4e8e-9b78-ab03fe28582e > .test-code.collapse">Code</button>
              <span class="test-duration fast">29 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm,<br>            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                    messageConstants.BUZZER_ACTION_COMMAND<br>                );<br>                hrm.sessionId = sessionId;<br>                hrm.hostId = idUtility.generateParticipantId();<br>                hrm.action = constants.buzzerActionCommands<br>                    .ACCEPT;<br>                hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                    hrm,<br>                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                        <span class="hljs-keyword">var</span> em = messageFactory.restore(<br>                            rm, messageConstants.ERROR<br>                        );<br>                        em.error.should.equal(constants<br>                            .messages.COULD_NOT_ACCEPT_REQUEST_NOT_HOST<br>                        );<br>                        done();<br>                    });<br>            });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="630bd748-4bb3-445a-8013-0324a2528876" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow response when session id is invalid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#630bd748-4bb3-445a-8013-0324a2528876 > .test-code.collapse">Code</button>
              <span class="test-duration fast">30 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm,<br>            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                    messageConstants.BUZZER_ACTION_COMMAND<br>                );<br>                hrm.sessionId = idUtility.generateSessionId();<br>                hrm.hostId = hostId;<br>                hrm.action = constants.buzzerActionCommands<br>                    .ACCEPT;<br>                hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                    hrm,<br>                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                        <span class="hljs-keyword">var</span> em = messageFactory.restore(<br>                            rm, messageConstants.ERROR<br>                        );<br>                        em.error.should.equal(constants<br>                            .messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED<br>                        );<br>                        done();<br>                    });<br>            });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="ca754a7f-8efa-49eb-92bf-0688d2dd6c27" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow response when session is complete
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#ca754a7f-8efa-49eb-92bf-0688d2dd6c27 > .test-code.collapse">Code</button>
              <span class="test-duration fast">30 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> bpm = messageFactory.create(messageConstants.CONTESTANT_BUZZER_PRESS);<br>        bpm.sessionId = sessionId;<br>        bpm.contestantId = rm.contestantId;<br>        cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS, bpm,<br>            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                    messageConstants.BUZZER_ACTION_COMMAND<br>                );<br>                hrm.sessionId = sessionId;<br>                hrm.hostId = hostId;<br>                hrm.action = constants.buzzerActionCommands<br>                    .ACCEPT;<br>                helper.getLatestSession().complete();<br>                hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                    hrm,<br>                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>                        <span class="hljs-keyword">var</span> em = messageFactory.restore(<br>                            rm, messageConstants.ERROR<br>                        );<br>                        em.error.should.equal(constants<br>                            .messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED<br>                        );<br>                        done();<br>                    });<br>            });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
              <section class="suite-wrap">
          <div id="c121a510-0336-4309-9670-dad84ddc91f9" class="suite has-tests has-passed">
            <h3 class="suite-title">when accepted</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="c121a510-0336-4309-9670-dad84ddc91f9" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">109 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#c121a510-0336-4309-9670-dad84ddc91f9-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="c121a510-0336-4309-9670-dad84ddc91f9-test-list" class="list-group test-list collapse in">
                    <div id="ce2e989b-3594-4d90-b662-c70f4c8a1129" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#ce2e989b-3594-4d90-b662-c70f4c8a1129 > .test-code.collapse">Code</button>
              <span class="test-duration medium">38 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m,<br>            messageConstants.OBSERVER_UPDATE);<br>        <span class="hljs-keyword">if</span> (om.gameState.contestants.length &amp;&amp; om.gameState<br>            .contestants[<span class="hljs-number">0</span>].score === <span class="hljs-number">1</span>) {<br>            done();<br>        }<br>    });<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .ACCEPT;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm);<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="86e08ca1-3e31-41dd-8ca4-0669ef76c52d" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update contestant score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#86e08ca1-3e31-41dd-8ca4-0669ef76c52d > .test-code.collapse">Code</button>
              <span class="test-duration fast">31 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .ACCEPT;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">1</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="4be9eb20-98ed-45ba-b0cf-990dea92f4ee" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update team score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#4be9eb20-98ed-45ba-b0cf-990dea92f4ee > .test-code.collapse">Code</button>
              <span class="test-duration medium">40 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .ACCEPT;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">1</span>);<br>                            <span class="hljs-keyword">var</span> t = s.teams.all[<br>                                <span class="hljs-number">0</span>];<br>                            t.score.should.equal(<br>                                <span class="hljs-number">1</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="e2cd4370-c1fd-453c-9862-b1ca078e4eda" class="suite has-tests has-passed">
            <h3 class="suite-title">when rejected</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="e2cd4370-c1fd-453c-9862-b1ca078e4eda" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">99 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#e2cd4370-c1fd-453c-9862-b1ca078e4eda-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="e2cd4370-c1fd-453c-9862-b1ca078e4eda-test-list" class="list-group test-list collapse in">
                    <div id="8c1959e5-4bc2-456c-9e1a-dc8eb3a38530" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#8c1959e5-4bc2-456c-9e1a-dc8eb3a38530 > .test-code.collapse">Code</button>
              <span class="test-duration fast">33 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> observedPending = <span class="hljs-literal">false</span>;<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m,<br>            messageConstants.OBSERVER_UPDATE);<br>        <span class="hljs-keyword">if</span> (om.gameState.currentState === constants<br>            .gameStates.PENDING) {<br>            observedPending = <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">return</span>;<br>        }<br>        <span class="hljs-keyword">if</span> (observedPending &amp;&amp; om.gameState.currentState ===<br>            constants.gameStates.READY) {<br>            om.gameState.contestants.length.should.equal(<br>                <span class="hljs-number">1</span>);<br>            om.gameState.contestants[<span class="hljs-number">0</span>].score.should<br>                .equal(<span class="hljs-number">0</span>);<br>            done();<br>        }<br>    });<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .REJECT;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm);<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="ea0720d3-041a-4f21-ab2d-8b794737c526" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not update contestant score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#ea0720d3-041a-4f21-ab2d-8b794737c526 > .test-code.collapse">Code</button>
              <span class="test-duration fast">33 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .REJECT;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="c30cface-a3bd-44a3-bb1b-c6e2419548de" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not update team score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#c30cface-a3bd-44a3-bb1b-c6e2419548de > .test-code.collapse">Code</button>
              <span class="test-duration fast">33 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .REJECT;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            <span class="hljs-keyword">var</span> t = s.teams.all[<br>                                <span class="hljs-number">0</span>];<br>                            t.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="025fea01-2d23-411b-959d-dbadfb378af2" class="suite has-tests has-passed">
            <h3 class="suite-title">when reset</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="025fea01-2d23-411b-959d-dbadfb378af2" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">109 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#025fea01-2d23-411b-959d-dbadfb378af2-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="025fea01-2d23-411b-959d-dbadfb378af2-test-list" class="list-group test-list collapse in">
                    <div id="98caf291-ab75-4cf5-b34d-5539341c310a" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#98caf291-ab75-4cf5-b34d-5539341c310a > .test-code.collapse">Code</button>
              <span class="test-duration fast">36 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    <span class="hljs-keyword">var</span> observedPending = <span class="hljs-literal">false</span>;<br>    <span class="hljs-comment">// listen for observer update</span><br>    hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> om = messageFactory.restore(m,<br>            messageConstants.OBSERVER_UPDATE);<br>        <span class="hljs-keyword">if</span> (om.gameState.currentState === constants<br>            .gameStates.PENDING) {<br>            observedPending = <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">return</span>;<br>        }<br>        <span class="hljs-keyword">if</span> (observedPending &amp;&amp; om.gameState.currentState ===<br>            constants.gameStates.READY) {<br>            om.gameState.contestants.length.should.equal(<br>                <span class="hljs-number">1</span>);<br>            om.gameState.contestants[<span class="hljs-number">0</span>].score.should<br>                .equal(<span class="hljs-number">0</span>);<br>            done();<br>        }<br>    });<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            helper.contestantBuzzerPress(cc, sessionId,<br>                rm.contestantId,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>                    helper.hostBuzzerAction(hc,<br>                        sessionId, hostId,<br>                        constants.buzzerActionCommands<br>                        .RESET);<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="538b2871-8bcd-4f64-853b-4d6570e4a669" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not update contestant score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#538b2871-8bcd-4f64-853b-4d6570e4a669 > .test-code.collapse">Code</button>
              <span class="test-duration fast">31 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .RESET;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="8c800daa-da9e-4ab2-bc60-c7e24af09532" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not update team score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#8c800daa-da9e-4ab2-bc60-c7e24af09532 > .test-code.collapse">Code</button>
              <span class="test-duration medium">42 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .RESET;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            <span class="hljs-keyword">var</span> t = s.teams.all[<br>                                <span class="hljs-number">0</span>];<br>                            t.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="3a037bf9-3d33-42fc-b776-349ee8e7eceb" class="suite has-tests has-passed">
            <h3 class="suite-title">when disabled</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="3a037bf9-3d33-42fc-b776-349ee8e7eceb" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">78 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#3a037bf9-3d33-42fc-b776-349ee8e7eceb-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="3a037bf9-3d33-42fc-b776-349ee8e7eceb-test-list" class="list-group test-list collapse in">
                    <div id="3cbcd44e-e255-4357-9b85-b27f12f0a5c5" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#3cbcd44e-e255-4357-9b85-b27f12f0a5c5 > .test-code.collapse">Code</button>
              <span class="test-duration fast">15 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br><span class="hljs-comment">// listen for observer update</span><br>hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>    <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>    <span class="hljs-keyword">if</span> (om.gameState.currentState === constants.gameStates.BUZZER_LOCK) {<br>        done();<br>    }<br>});<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    helper.hostBuzzerAction(hc, rm.sessionId, rm.hostId,<br>        constants.buzzerActionCommands.DISABLE);<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="c8f41b1d-c7bc-40ff-bfa7-7f1e88d18591" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not update contestant score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#c8f41b1d-c7bc-40ff-bfa7-7f1e88d18591 > .test-code.collapse">Code</button>
              <span class="test-duration fast">31 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .DISABLE;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="989cf22a-53aa-424c-aace-7f0bd091f266" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not update team score
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#989cf22a-53aa-424c-aace-7f0bd091f266 > .test-code.collapse">Code</button>
              <span class="test-duration fast">32 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> cc = helper.createClient();<br>    helper.contestantJoin(cc, <span class="hljs-string">'username'</span>, sessionId,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>            <span class="hljs-keyword">var</span> bpm = messageFactory.create(<br>                messageConstants.CONTESTANT_BUZZER_PRESS<br>            );<br>            bpm.sessionId = sessionId;<br>            bpm.contestantId = rm.contestantId;<br>            cc.emit(messageConstants.CONTESTANT_BUZZER_PRESS,<br>                bpm,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    messageFactory.restore(m,<br>                        messageConstants.SUCCESS<br>                    );<br>                    <span class="hljs-keyword">var</span> hrm = messageFactory.create(<br>                        messageConstants.BUZZER_ACTION_COMMAND<br>                    );<br>                    hrm.sessionId = sessionId;<br>                    hrm.hostId = hostId;<br>                    hrm.action = constants.buzzerActionCommands<br>                        .DISABLE;<br>                    hc.emit(messageConstants.BUZZER_ACTION_COMMAND,<br>                        hrm,<br>                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                            messageFactory.restore(<br>                                m,<br>                                messageConstants<br>                                .SUCCESS);<br>                            <span class="hljs-keyword">var</span> s = helper.getLatestSession();<br>                            <span class="hljs-keyword">var</span> c = s.contestants[<br>                                <span class="hljs-number">0</span>];<br>                            c.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            <span class="hljs-keyword">var</span> t = s.teams.all[<br>                                <span class="hljs-number">0</span>];<br>                            t.score.should.equal(<br>                                <span class="hljs-number">0</span>);<br>                            done();<br>                        });<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="c78551ef-8b8d-4396-af8f-87da124b76ac" class="suite has-tests has-passed">
            <h3 class="suite-title">when enabled</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="c78551ef-8b8d-4396-af8f-87da124b76ac" class="suite-chart" width="50" height="50" data-total-passes="1" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">19 ms</li>
                <li class="suite-summary-item tests">1</li>
                <li class="suite-summary-item passed">1</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#c78551ef-8b8d-4396-af8f-87da124b76ac-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="c78551ef-8b8d-4396-af8f-87da124b76ac-test-list" class="list-group test-list collapse in">
                    <div id="0c42125a-c719-40de-9d45-35d9c6d36cb5" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#0c42125a-c719-40de-9d45-35d9c6d36cb5 > .test-code.collapse">Code</button>
              <span class="test-duration fast">19 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br><span class="hljs-keyword">var</span> observedLocked = <span class="hljs-literal">false</span>;<br><span class="hljs-comment">// listen for observer update</span><br>hc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>    <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>    <span class="hljs-keyword">if</span> (om.gameState.currentState === constants.gameStates.BUZZER_LOCK) {<br>        observedLocked = <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">return</span>;<br>    }<br>    <span class="hljs-keyword">if</span> (observedLocked &amp;&amp; om.gameState.currentState ===<br>        constants.gameStates.READY) {<br>        done();<br>    }<br>});<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    helper.hostBuzzerAction(hc, rm.sessionId, rm.hostId,<br>        constants.buzzerActionCommands.DISABLE,<br>        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sm</span>) </span>{<br>            sm.should.be.instanceOf(successMessage);<br>            helper.getLatestSession().currentState.should<br>                .equal(constants.gameStates.BUZZER_LOCK);<br>            helper.hostBuzzerAction(hc, rm.sessionId,<br>                rm.hostId, constants.buzzerActionCommands<br>                .ENABLE,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sm</span>) </span>{<br>                    sm.should.be.instanceOf(<br>                        successMessage);<br>                    helper.getLatestSession().currentState<br>                        .should.equal(constants.gameStates<br>                            .READY);<br>                });<br>        });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="a1531d52-c0fe-4f8a-b766-c6a622ee0456" class="suite has-tests has-passed">
            <h3 class="suite-title">team name change</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="a1531d52-c0fe-4f8a-b766-c6a622ee0456" class="suite-chart" width="50" height="50" data-total-passes="8" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">138 ms</li>
                <li class="suite-summary-item tests">8</li>
                <li class="suite-summary-item passed">8</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#a1531d52-c0fe-4f8a-b766-c6a622ee0456-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="a1531d52-c0fe-4f8a-b766-c6a622ee0456-test-list" class="list-group test-list collapse in">
                    <div id="e79e803a-b594-404a-886b-83a6438210ea" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#e79e803a-b594-404a-886b-83a6438210ea > .test-code.collapse">Code</button>
              <span class="test-duration fast">16 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.teamNameFrom = team.teamName;<br>    req.teamNameTo = <span class="hljs-string">'The new team name'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        team.teamName.should.equal(req.teamNameTo);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="dfaa6926-c07d-4921-8a3a-7d73da51af79" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it when name contains profanity
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#dfaa6926-c07d-4921-8a3a-7d73da51af79 > .test-code.collapse">Code</button>
              <span class="test-duration fast">14 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.teamNameFrom = team.teamName;<br>    req.teamNameTo = <span class="hljs-string">'ash0le penis'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        team.teamName.should.equal(req.teamNameTo);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="e1c0493a-d6c5-47f8-82f1-54f40882958f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it when team name editing is manual
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#e1c0493a-d6c5-47f8-82f1-54f40882958f > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.MANUAL;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.teamNameFrom = team.teamName;<br>    req.teamNameTo = <span class="hljs-string">'The new team name'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(m, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        team.teamName.should.equal(req.teamNameTo);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="dddf491f-9f55-4b1a-89a9-9d3697140e5c" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#dddf491f-9f55-4b1a-89a9-9d3697140e5c > .test-code.collapse">Code</button>
              <span class="test-duration fast">17 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>    session.complete();<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.teamNameFrom = team.teamName;<br>    req.teamNameTo = <span class="hljs-string">'A new team name'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="c7d703d1-1cab-4c4e-b665-72ef3b5165b4" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when not the host
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#c7d703d1-1cab-4c4e-b665-72ef3b5165b4 > .test-code.collapse">Code</button>
              <span class="test-duration fast">14 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = idUtility.generateParticipantId();<br>    req.teamNameFrom = team.teamName;<br>    req.teamNameTo = <span class="hljs-string">'A new team name'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_REQUEST_NOT_HOST);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="724796d1-d0c0-4155-aa04-0ee389143146" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it team does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#724796d1-d0c0-4155-aa04-0ee389143146 > .test-code.collapse">Code</button>
              <span class="test-duration fast">15 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.teamNameFrom = <span class="hljs-string">'does not exist'</span>;<br>    req.teamNameTo = <span class="hljs-string">'some other team name'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.COULD_NOT_PROCESS_REQUEST_TEAM_NOT_FOUND);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="ce0c1d44-488d-4695-82fd-4b2eb3a73baf" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when team name already in use
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#ce0c1d44-488d-4695-82fd-4b2eb3a73baf > .test-code.collapse">Code</button>
              <span class="test-duration fast">28 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">2</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team1 = session.teams.all[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">var</span> team2 = session.teams.all[<span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.teamNameFrom = team1.teamName;<br>    req.teamNameTo = team2.teamName;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_TEAM_NAME_IN_USE);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="73c107fb-4f53-4df1-a42a-55f9257ed6fc" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#73c107fb-4f53-4df1-a42a-55f9257ed6fc > .test-code.collapse">Code</button>
              <span class="test-duration fast">16 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">2</span>;<br>s.teamSize = <span class="hljs-number">1</span>;<br>s.teamNameEdit = constants.teamNameEdit.ALLOW;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE);<br>    req.sessionId = idUtility.generateSessionId();<br>    req.hostId = hostId;<br>    req.teamNameFrom = team.teamName;<br>    req.teamNameTo = <span class="hljs-string">'some new name'</span>;<br>    hc.emit(messageConstants.HOST_TEAM_NAME_UPDATE_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="02cbf435-fe12-44e2-897b-9b7a731e8c23" class="suite has-tests has-passed">
            <h3 class="suite-title">team leader change</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="02cbf435-fe12-44e2-897b-9b7a731e8c23" class="suite-chart" width="50" height="50" data-total-passes="7" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">300 ms</li>
                <li class="suite-summary-item tests">7</li>
                <li class="suite-summary-item passed">7</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#02cbf435-fe12-44e2-897b-9b7a731e8c23-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="02cbf435-fe12-44e2-897b-9b7a731e8c23-test-list" class="list-group test-list collapse in">
                    <div id="4e1d575c-73e1-4640-8e70-e8b4d01725e6" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it when request is valid
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#4e1d575c-73e1-4640-8e70-e8b4d01725e6 > .test-code.collapse">Code</button>
              <span class="test-duration medium">41 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> teamLeaderUsername = team.teamLeader.username;<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = sessionId;<br>            req.hostId = hostId;<br>            req.teamName = team.teamName;<br>            req.teamLeaderUsername = team.teamLeader.username ===<br>                <span class="hljs-string">'c1'</span> ? <span class="hljs-string">'c2'</span> : <span class="hljs-string">'c1'</span>;<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> sm = messageFactory.restore(m,<br>                        messageConstants.SUCCESS);<br>                    sm.should.not.be.null();<br>                    team.teamLeader.username.should.not.equal(<br>                        teamLeaderUsername);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="d0e8e4af-a3a3-49c4-9844-bff46d647073" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow it team leader is the same
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#d0e8e4af-a3a3-49c4-9844-bff46d647073 > .test-code.collapse">Code</button>
              <span class="test-duration medium">48 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> teamLeaderUsername = team.teamLeader.username;<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = sessionId;<br>            req.hostId = hostId;<br>            req.teamName = team.teamName;<br>            req.teamLeaderUsername = team.teamLeader.username;<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> sm = messageFactory.restore(m,<br>                        messageConstants.SUCCESS);<br>                    sm.should.not.be.null();<br>                    team.teamLeader.username.should.equal(<br>                        teamLeaderUsername);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="f8edc92f-aee8-4dfb-ac7b-71ef1b2ad41c" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#f8edc92f-aee8-4dfb-ac7b-71ef1b2ad41c > .test-code.collapse">Code</button>
              <span class="test-duration medium">43 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = sessionId;<br>            req.hostId = hostId;<br>            req.teamName = team.teamName;<br>            req.teamLeaderUsername = team.teamLeader.username ===<br>                <span class="hljs-string">'c1'</span> ? <span class="hljs-string">'c2'</span> : <span class="hljs-string">'c1'</span>;<br>            session.complete();<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m,<br>                        messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="a8862a55-ab0a-4326-84c2-38c3b0feb1d9" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when not the host
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#a8862a55-ab0a-4326-84c2-38c3b0feb1d9 > .test-code.collapse">Code</button>
              <span class="test-duration medium">48 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = sessionId;<br>            req.hostId = idUtility.generateParticipantId();<br>            req.teamName = team.teamName;<br>            req.teamLeaderUsername = team.teamLeader.username ===<br>                <span class="hljs-string">'c1'</span> ? <span class="hljs-string">'c2'</span> : <span class="hljs-string">'c1'</span>;<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m,<br>                        messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_REQUEST_NOT_HOST);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="ab6f0be9-e1ed-4c13-b4b1-07a4ab1270e2" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it team does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#ab6f0be9-e1ed-4c13-b4b1-07a4ab1270e2 > .test-code.collapse">Code</button>
              <span class="test-duration fast">37 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = sessionId;<br>            req.hostId = hostId;<br>            req.teamName = <span class="hljs-string">'does not exist team name'</span>;<br>            req.teamLeaderUsername = team.teamLeader.username ===<br>                <span class="hljs-string">'c1'</span> ? <span class="hljs-string">'c2'</span> : <span class="hljs-string">'c1'</span>;<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m,<br>                        messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.COULD_NOT_PROCESS_REQUEST_TEAM_NOT_FOUND);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="f6b12e26-8490-41d8-8b65-3e1275b3c216" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#f6b12e26-8490-41d8-8b65-3e1275b3c216 > .test-code.collapse">Code</button>
              <span class="test-duration medium">41 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = idUtility.generateSessionId();<br>            req.hostId = hostId;<br>            req.teamName = team.teamName;<br>            req.teamLeaderUsername = team.teamLeader.username ===<br>                <span class="hljs-string">'c1'</span> ? <span class="hljs-string">'c2'</span> : <span class="hljs-string">'c1'</span>;<br>            session.complete();<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m,<br>                        messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="a139d57b-4417-48de-8b71-1b3b0de658a5" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when contestant does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#a139d57b-4417-48de-8b71-1b3b0de658a5 > .test-code.collapse">Code</button>
              <span class="test-duration medium">42 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.maxTeams = <span class="hljs-number">1</span>;<br>s.teamSize = <span class="hljs-number">2</span>;<br>s.teamLeaderSelectionMethod = constants.teamLeaderSelectionMethod.RANDOM;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> c1 = helper.createClient();<br>    <span class="hljs-keyword">var</span> c2 = helper.createClient();<br>    helper.contestantJoin(c1, <span class="hljs-string">'c1'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>        helper.contestantJoin(c2, <span class="hljs-string">'c2'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br>            <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>            <span class="hljs-keyword">var</span> team = session.teams.all[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE);<br>            req.sessionId = sessionId;<br>            req.hostId = hostId;<br>            req.teamName = team.teamName;<br>            req.teamLeaderUsername = <span class="hljs-string">'does not exist'</span>;<br>            hc.emit(messageConstants.HOST_TEAM_LEADER_SET_REQUEST_MESSAGE,<br>                req,<br>                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>                    <span class="hljs-keyword">var</span> em = messageFactory.restore(m,<br>                        messageConstants.ERROR);<br>                    em.should.not.be.null();<br>                    em.error.should.equal(constants.messages.COULD_NOT_PROCESS_REQUEST_CONTESTANT_NOT_FOUND);<br>                    done();<br>                });<br>        });<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="bdf6b7ce-8e31-43d0-9198-d3de91a733ab" class="suite has-tests has-passed">
            <h3 class="suite-title">settings update</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="bdf6b7ce-8e31-43d0-9198-d3de91a733ab" class="suite-chart" width="50" height="50" data-total-passes="9" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">160 ms</li>
                <li class="suite-summary-item tests">9</li>
                <li class="suite-summary-item passed">9</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#bdf6b7ce-8e31-43d0-9198-d3de91a733ab-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="bdf6b7ce-8e31-43d0-9198-d3de91a733ab-test-list" class="list-group test-list collapse in">
                    <div id="22be4140-9a11-4efc-a69f-bc0c5c355897" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#22be4140-9a11-4efc-a69f-bc0c5c355897 > .test-code.collapse">Code</button>
              <span class="test-duration fast">16 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br>s.sessionName = <span class="hljs-string">'Test session'</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.sessionName = <span class="hljs-string">'Test session X'</span>;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    session.complete();<br>    hc.emit(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="195e86a0-d346-4755-b339-ee77a0e0c5d2" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when not the host
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#195e86a0-d346-4755-b339-ee77a0e0c5d2 > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br>s.sessionName = <span class="hljs-string">'Test session'</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = idUtility.generateParticipantId();<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.sessionName = <span class="hljs-string">'Test session X'</span>;<br>    hc.emit(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>        em.error.should.equal(constants.messages.COULD_NOT_ACCEPT_REQUEST_NOT_HOST);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="41a8a9ca-4166-488e-897f-33341de9fae6" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow it when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#41a8a9ca-4166-488e-897f-33341de9fae6 > .test-code.collapse">Code</button>
              <span class="test-duration fast">16 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br>s.sessionName = <span class="hljs-string">'Test session'</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = idUtility.generateSessionId();<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.sessionName = <span class="hljs-string">'Test session X'</span>;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    session.complete();<br>    hc.emit(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="f17800b2-3996-42ea-a5db-c45aedc18d2e" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update the session name
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#f17800b2-3996-42ea-a5db-c45aedc18d2e > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br>s.sessionName = <span class="hljs-string">'Test session'</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.sessionName = <span class="hljs-string">'Test session X'</span>;<br>    hc.emit(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.settings.sessionName.should.be.equal(<span class="hljs-string">'Test session X'</span>);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="c6422ca0-ad8e-4251-9e4c-2b17002584e7" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update the max contestants
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#c6422ca0-ad8e-4251-9e4c-2b17002584e7 > .test-code.collapse">Code</button>
              <span class="test-duration fast">25 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br>s.sessionName = <span class="hljs-string">'Test session'</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.maxContestants = <span class="hljs-number">6</span>;<br>    hc.emit(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.settings.maxContestants.should.equal(<span class="hljs-number">6</span>);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="d408022d-2129-40fa-9c94-88eb54f9328c" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update the max teams
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#d408022d-2129-40fa-9c94-88eb54f9328c > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxTeams = <span class="hljs-number">5</span>;<br>s.teamSize = <span class="hljs-number">5</span>;<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.sessionName = <span class="hljs-string">'Test session'</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.maxTeams = <span class="hljs-number">6</span>;<br>    hc.emit(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.settings.maxTeams.should.equal(<span class="hljs-number">6</span>);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="30628ed9-d3df-400a-b63d-f954f52efb83" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update the team size
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#30628ed9-d3df-400a-b63d-f954f52efb83 > .test-code.collapse">Code</button>
              <span class="test-duration fast">18 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxTeams = <span class="hljs-number">5</span>;<br>s.teamSize = <span class="hljs-number">5</span>;<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.sessionName = <span class="hljs-string">'Test session'</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.teamSize = <span class="hljs-number">6</span>;<br>    hc.emit(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.settings.teamSize.should.equal(<span class="hljs-number">6</span>);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="32664844-333e-48cd-bf97-f0f5730b6e7f" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update the session name, max teams and team size
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#32664844-333e-48cd-bf97-f0f5730b6e7f > .test-code.collapse">Code</button>
              <span class="test-duration fast">16 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxTeams = <span class="hljs-number">5</span>;<br>s.teamSize = <span class="hljs-number">5</span>;<br>s.hasTeams = <span class="hljs-literal">true</span>;<br>s.sessionName = <span class="hljs-string">'Test session'</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.sessionName = <span class="hljs-string">'Test session X'</span>;<br>    req.teamSize = <span class="hljs-number">6</span>;<br>    req.maxTeams = <span class="hljs-number">6</span>;<br>    hc.emit(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.settings.sessionName.should.be.equal(<span class="hljs-string">'Test session X'</span>);<br>        session.settings.teamSize.should.equal(<span class="hljs-number">6</span>);<br>        session.settings.maxTeams.should.equal(<span class="hljs-number">6</span>);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="b98a63ed-e82c-4f62-a2d4-09baeedd3030" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update the session name and max contestants
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#b98a63ed-e82c-4f62-a2d4-09baeedd3030 > .test-code.collapse">Code</button>
              <span class="test-duration fast">15 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br>s.sessionName = <span class="hljs-string">'Test session'</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.hostId = hostId;<br>    req.sessionName = <span class="hljs-string">'Test session X'</span>;<br>    req.maxContestants = <span class="hljs-number">6</span>;<br>    hc.emit(messageConstants.HOST_SETTINGS_UPDATE_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> sm = messageFactory.restore(rm, messageConstants.SUCCESS);<br>        sm.should.not.be.null();<br>        <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>        session.settings.sessionName.should.be.equal(<span class="hljs-string">'Test session X'</span>);<br>        session.settings.maxContestants.should.equal(<span class="hljs-number">6</span>);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="72a3a404-cbd3-49f0-b607-7eb3ee1d7fd2" class="suite has-tests has-passed">
            <h3 class="suite-title">info request</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="72a3a404-cbd3-49f0-b607-7eb3ee1d7fd2" class="suite-chart" width="50" height="50" data-total-passes="4" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">67 ms</li>
                <li class="suite-summary-item tests">4</li>
                <li class="suite-summary-item passed">4</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#72a3a404-cbd3-49f0-b607-7eb3ee1d7fd2-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="72a3a404-cbd3-49f0-b607-7eb3ee1d7fd2-test-list" class="list-group test-list collapse in">
                    <div id="78a3a5b2-3ada-43a5-98d9-eecc4c79945c" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should return in a valid state for individuals contestant
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#78a3a5b2-3ada-43a5-98d9-eecc4c79945c > .test-code.collapse">Code</button>
              <span class="test-duration fast">16 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.participantId = hostId;<br>    hc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> irm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>        irm.should.not.be.null();<br>        should(irm.info).not.be.null();<br>        should(irm.info.host).not.be.null();<br>        should(irm.info.contestant).be.null();<br>        should(irm.info.team).be.null();<br>        should(irm.info.session).not.be.null();<br>        should(irm.info.sessionState).be.equal(<span class="hljs-string">'ready'</span>);<br>        should(irm.info.isObserver).be.false();<br>        should(irm.info.isHost).be.true();<br>        should(irm.info.isContestant).be.false();<br>        should(irm.info.isSessionCompleted).be.false();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="6d858c66-7bd8-4133-8b4a-0bd84771fd1c" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#6d858c66-7bd8-4133-8b4a-0bd84771fd1c > .test-code.collapse">Code</button>
              <span class="test-duration fast">15 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = idUtility.generateSessionId();<br>    req.participantId = hostId;<br>    hc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="d3f6e41b-a68e-4d00-8f06-7782e40197cc" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when contestant does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#d3f6e41b-a68e-4d00-8f06-7782e40197cc > .test-code.collapse">Code</button>
              <span class="test-duration fast">15 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.participantId = idUtility.generateParticipantId();<br>    hc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>        em.error.should.equal(constants.messages.COULD_NOT_PROCESS_REQUEST_CONTESTANT_OR_HOST_NOT_FOUND);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="e32a4477-b5f7-499a-a5bd-c7f4ce181e94" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when session is complete
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#e32a4477-b5f7-499a-a5bd-c7f4ce181e94 > .test-code.collapse">Code</button>
              <span class="test-duration fast">21 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> hostId = rm.hostId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    req.participantId = hostId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    session.complete();<br>    hc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> irm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>        irm.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="456fa796-b990-4753-acc6-6dca0e83c9d1" class="suite has-tests has-passed">
            <h3 class="suite-title">on disconnect</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerHostTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="456fa796-b990-4753-acc6-6dca0e83c9d1" class="suite-chart" width="50" height="50" data-total-passes="1" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">29 ms</li>
                <li class="suite-summary-item tests">1</li>
                <li class="suite-summary-item passed">1</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#456fa796-b990-4753-acc6-6dca0e83c9d1-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="456fa796-b990-4753-acc6-6dca0e83c9d1-test-list" class="list-group test-list collapse in">
                    <div id="aeffdfbf-2ea5-46a0-b764-a879ab04a743" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should update observers
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#aeffdfbf-2ea5-46a0-b764-a879ab04a743 > .test-code.collapse">Code</button>
              <span class="test-duration fast">29 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> c = helper.createClient();<br>    helper.contestantJoin(c, <span class="hljs-string">'test user'</span>, sessionId, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-comment">// listen for observer update</span><br>        c.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>            <span class="hljs-keyword">var</span> om = messageFactory.restore(m, messageConstants.OBSERVER_UPDATE);<br>            <span class="hljs-keyword">if</span> (om.gameState.host.disconnected) {<br>                done();<br>                c.discount();<br>            }<br>        });<br>        helper.clients = [];<br>        <span class="hljs-comment">// disconnect host</span><br>        hc.disconnect();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
        
          </div>
        </section>
            <section class="suite-wrap">
          <div id="5b2316c9-e4ae-462f-957e-6042ea70eb58" class="suite has-suites">
            <h3 class="suite-title">Buzzer server</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerObserverTests.js</h5>
        
              <section class="suite-wrap">
          <div id="22e1a6b3-1d4b-4914-a381-7e1bcd978e7c" class="suite has-suites">
            <h3 class="suite-title">observer</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerObserverTests.js</h5>
        
              <section class="suite-wrap">
          <div id="06344c90-9581-48a6-8a9f-aab81dd37ab0" class="suite has-tests has-passed">
            <h3 class="suite-title">rejoin</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerObserverTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="06344c90-9581-48a6-8a9f-aab81dd37ab0" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">96 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#06344c90-9581-48a6-8a9f-aab81dd37ab0-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="06344c90-9581-48a6-8a9f-aab81dd37ab0-test-list" class="list-group test-list collapse in">
                    <div id="4040ee50-51cf-4f9a-b066-6bdf6afd7cf3" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when request is valid and subscribe observer to the observer room
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#4040ee50-51cf-4f9a-b066-6bdf6afd7cf3 > .test-code.collapse">Code</button>
              <span class="test-duration fast">27 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> oc = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = rm.sessionId;<br>    rjm.rejoinAs = constants.rejoinAs.OBSERVER;<br>    <span class="hljs-comment">// listen for observer update</span><br>    oc.on(messageConstants.OBSERVER_UPDATE, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) </span>{<br>        <span class="hljs-keyword">var</span> ob = messageFactory.restore(message, messageConstants.OBSERVER_UPDATE);<br>        ob.should.not.be.null();<br>        done();<br>    });<br>    oc.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{<br>        data.type.should.equal(messageConstants.SUCCESS);<br>        <span class="hljs-comment">// force observer update</span><br>        helper.forceObserveUpdate(rm.sessionId);<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="03a5e7c3-3da6-4601-bf65-84675dea6136" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#03a5e7c3-3da6-4601-bf65-84675dea6136 > .test-code.collapse">Code</button>
              <span class="test-duration fast">27 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> ob = helper.createClient();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = idUtility.generateSessionId();<br>    rjm.rejoinAs = constants.rejoinAs.OBSERVER;<br>    ob.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="8716f439-54e8-4774-9b0a-9a638e2dcba4" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session is completed
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#8716f439-54e8-4774-9b0a-9a638e2dcba4 > .test-code.collapse">Code</button>
              <span class="test-duration medium">42 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">var</span> c = helper.createClient();<br>helper.createSession(c, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> ob = helper.createClient();<br>    helper.getLatestSession().complete();<br>    <span class="hljs-comment">// rejoin</span><br>    <span class="hljs-keyword">var</span> rjm = messageFactory.create(messageConstants.REJOIN_SESSION);<br>    rjm.sessionId = idUtility.generateSessionId();<br>    rjm.rejoinAs = constants.rejoinAs.OBSERVER;<br>    ob.emit(messageConstants.REJOIN_SESSION, rjm, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(m, messageConstants.ERROR);<br>        em.should.not.be.null();<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND_OR_IS_COMPLETED);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
              <section class="suite-wrap">
          <div id="33d5b1e6-29a1-4831-9ac3-6fed5c1b8121" class="suite has-tests has-passed">
            <h3 class="suite-title">info request</h3>
            <h5 class="suite-filename">/tests/Functional/lib/BuzzerServerObserverTests.js</h5>
            <!-- Suite Chart -->
            <div class="suite-chart-wrap">
              <canvas id="33d5b1e6-29a1-4831-9ac3-6fed5c1b8121" class="suite-chart" width="50" height="50" data-total-passes="3" data-total-failures="0" data-total-pending="0" data-total-skipped="0"></canvas>
            </div>
            <div class="suite-data-wrap">
              <!-- Suite Summary -->
              <ul class="suite-summary list-unstyled">
                <li class="suite-summary-item duration">87 ms</li>
                <li class="suite-summary-item tests">3</li>
                <li class="suite-summary-item passed">3</li>
                <li class="suite-summary-item failed">0</li>
                <li class="suite-summary-item pending">0</li>
              </ul>
              <!-- Test Info -->
              <div class="suite-test-wrap">
                <div class="suite-test-header" data-toggle="collapse" data-target="#33d5b1e6-29a1-4831-9ac3-6fed5c1b8121-test-list">
                  <h4 class="suite-test-header-title">Tests</h4>
                </div>
                <div id="33d5b1e6-29a1-4831-9ac3-6fed5c1b8121-test-list" class="list-group test-list collapse in">
                    <div id="97fca6bf-0a05-4605-a186-b6cd7134a115" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should return in a valid state for individuals contestant
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#97fca6bf-0a05-4605-a186-b6cd7134a115 > .test-code.collapse">Code</button>
              <span class="test-duration fast">30 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    <span class="hljs-keyword">var</span> oc = helper.createClient();<br>    oc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> irm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>        irm.should.not.be.null();<br>        should(irm.info).not.be.null();<br>        should(irm.info.host).be.null();<br>        should(irm.info.contestant).be.null();<br>        should(irm.info.team).be.null();<br>        should(irm.info.session).not.be.null();<br>        should(irm.info.sessionState).be.equal(<span class="hljs-string">'ready'</span>);<br>        should(irm.info.isObserver).be.true();<br>        should(irm.info.isHost).be.false();<br>        should(irm.info.isContestant).be.false();<br>        should(irm.info.isSessionCompleted).be.false();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="58ad7aec-ad0a-4a10-bc89-7a81957825e7" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should not allow when session does not exist
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#58ad7aec-ad0a-4a10-bc89-7a81957825e7 > .test-code.collapse">Code</button>
              <span class="test-duration fast">27 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = idUtility.generateSessionId();<br>    <span class="hljs-keyword">var</span> oc = helper.createClient();<br>    oc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> em = messageFactory.restore(rm, messageConstants.ERROR);<br>        em.error.should.equal(constants.messages.SESSION_COULD_NOT_BE_FOUND);<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>            <div id="7cad29a1-395d-4fcb-aafb-e46469ce2599" class="list-group-item test passed">
          <!-- Test Heading -->
          <div class="test-heading">
            <h4 class="test-title">
              <span class="text-muted hidden"> it </span>
              should allow when session is complete
            </h4>
            <div class="pull-right">
              <button class="btn btn-link btn-sm toggle-btn toggle-code collapsed" data-toggle="collapse" data-target="#7cad29a1-395d-4fcb-aafb-e46469ce2599 > .test-code.collapse">Code</button>
              <span class="test-duration fast">30 ms</span>
            </div>
          </div>
          <!-- Test Errors -->
          <!-- Test Code -->
          <div class="test-code collapse">
            <pre><code class="hljs javascript small"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> Settings();<br>s.maxContestants = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> hc = helper.createClient();<br>helper.createSession(hc, s, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>    <span class="hljs-keyword">var</span> sessionId = rm.sessionId;<br>    <span class="hljs-keyword">var</span> req = messageFactory.create(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE);<br>    req.sessionId = sessionId;<br>    <span class="hljs-keyword">var</span> session = helper.getLatestSession();<br>    session.complete();<br>    <span class="hljs-keyword">var</span> oc = helper.createClient();<br>    oc.emit(messageConstants.SESSION_INFORMATION_REQUEST_MESSAGE, req, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rm</span>) </span>{<br>        <span class="hljs-keyword">var</span> irm = messageFactory.restore(rm, messageConstants.SESSION_INFORMATION_RESPONSE_MESSAGE);<br>        irm.should.not.be.null();<br>        done();<br>    });<br>});</code></pre>
          </div>
          <!-- Test Error Stack -->
        </div>        </div>
              </div>
            </div>
        
        
          </div>
        </section>
        
          </div>
        </section>
        
          </div>
        </section>
    </div>

    <footer>
      <div class="container">
        <p>Report generated by <a href="http://adamgruber.github.io/mochawesome/" target="_blank">mochawesome</a>.<br>Designed and built by <a href="https://github.com/adamgruber" target="_blank">adamgruber</a>. &copy;2016.</p>
      </div>
    </footer>

    <!-- Nav Menu -->
    <div class="nav-menu-wrap">
      <div class="menu-overlay close-menu"></div>
      <nav class="menu">
        <button class="nav-menu-btn close-menu"><i class="icon-failed"></i></button>
        <ul class="list-unstyled main-menu">
                <li class="nav-menu-item">
                <a href="#65ab7b64-3685-40e1-a61d-206bcde2d98a" class="nav-menu-item-link">Buzzer server</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#b84bbcb8-aadc-405e-9b01-3b40f8e61785" class="nav-menu-item-link">contestant</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#482d087c-88a4-4ab9-9195-e84cce287d4e" class="nav-menu-item-link">join</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#192c5286-7ea1-44bc-90e9-081fc8d649b9" class="nav-menu-item-link has-passes">as individual</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#6ebc4dff-98a6-4480-b73a-e94ad10edd62" class="nav-menu-item-link has-passes">with teams</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#c1cf23b7-71d0-4d3a-8610-f6a62e81e62e" class="nav-menu-item-link has-passes">when team leader selection method is RANDOM</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#1fe4807e-70c9-4d22-b09c-02d6078ff80e" class="nav-menu-item-link has-passes">when team selection method is PLAYER_CHOICE</a>
            </li>
                  </ul>
            </li>
                  </ul>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#e389b985-ca5f-4701-889f-674f932fc420" class="nav-menu-item-link has-passes">rejoin</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#a73f108a-ec63-4020-813a-c71041adb1d1" class="nav-menu-item-link has-passes">on disconnect</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#4f9c6c50-95a2-4fd6-80ab-7be8cf48f35a" class="nav-menu-item-link has-passes">team leader inquiry response</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#e79700c2-7fce-48ad-96e9-24a6c3096749" class="nav-menu-item-link has-passes">buzzerPress</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#0d9712e6-18da-4b1f-9e7b-2d0cd7c7afc3" class="nav-menu-item-link has-passes">team name change request</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#2179b5d3-8e52-4c96-a4b8-ad3c0b09ccde" class="nav-menu-item-link has-passes">info request</a>
            </li>
                  </ul>
            </li>
                  </ul>
            </li>
                <li class="nav-menu-item">
                <a href="#f4d1deec-5537-460f-bf6c-77ed064bbf70" class="nav-menu-item-link">Buzzer server</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#291ff8c8-b117-4b68-9e89-658d50ba6945" class="nav-menu-item-link">host</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#1c8360b6-04ae-454a-ae74-25793af5e5d3" class="nav-menu-item-link">create</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#356e9b41-e49b-407b-8de1-0098e3e6fcea" class="nav-menu-item-link has-passes">session</a>
            </li>
                  </ul>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#753b37aa-7a71-4c47-b1f1-f65ad0d0da15" class="nav-menu-item-link">rejoin</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#64fcf324-1e81-42ef-8aeb-c5c4d1345dec" class="nav-menu-item-link has-passes">session</a>
            </li>
                  </ul>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#0ab7e6c6-c229-4f27-8848-36270158bb75" class="nav-menu-item-link">complete</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#d47ccb0f-01cc-459a-bf96-5a0e2c131c55" class="nav-menu-item-link has-passes">session</a>
            </li>
                  </ul>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#ecc5cfd9-d25d-451a-9f27-27ff23630bd4" class="nav-menu-item-link">buzzer</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#11df65df-210a-484d-9899-e45a1cb10f94" class="nav-menu-item-link has-passes">action</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#c121a510-0336-4309-9670-dad84ddc91f9" class="nav-menu-item-link has-passes">when accepted</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#e2cd4370-c1fd-453c-9862-b1ca078e4eda" class="nav-menu-item-link has-passes">when rejected</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#025fea01-2d23-411b-959d-dbadfb378af2" class="nav-menu-item-link has-passes">when reset</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#3a037bf9-3d33-42fc-b776-349ee8e7eceb" class="nav-menu-item-link has-passes">when disabled</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#c78551ef-8b8d-4396-af8f-87da124b76ac" class="nav-menu-item-link has-passes">when enabled</a>
            </li>
                  </ul>
            </li>
                  </ul>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#a1531d52-c0fe-4f8a-b766-c6a622ee0456" class="nav-menu-item-link has-passes">team name change</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#02cbf435-fe12-44e2-897b-9b7a731e8c23" class="nav-menu-item-link has-passes">team leader change</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#bdf6b7ce-8e31-43d0-9198-d3de91a733ab" class="nav-menu-item-link has-passes">settings update</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#72a3a404-cbd3-49f0-b607-7eb3ee1d7fd2" class="nav-menu-item-link has-passes">info request</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#456fa796-b990-4753-acc6-6dca0e83c9d1" class="nav-menu-item-link has-passes">on disconnect</a>
            </li>
                  </ul>
            </li>
                  </ul>
            </li>
                <li class="nav-menu-item">
                <a href="#5b2316c9-e4ae-462f-957e-6042ea70eb58" class="nav-menu-item-link">Buzzer server</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#22e1a6b3-1d4b-4914-a381-7e1bcd978e7c" class="nav-menu-item-link">observer</a>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#06344c90-9581-48a6-8a9f-aab81dd37ab0" class="nav-menu-item-link has-passes">rejoin</a>
            </li>
                  </ul>
                  <ul class="list-unstyled sub-menu">
                    <li class="nav-menu-item">
                <a href="#33d5b1e6-29a1-4831-9ac3-6fed5c1b8121" class="nav-menu-item-link has-passes">info request</a>
            </li>
                  </ul>
            </li>
                  </ul>
            </li>
        </ul>
      </nav>
    </div>

    <!-- Scripts -->
    <script src="js/vendor.js"></script>
    <script src="js/mochawesome.js"></script>
  </body>
</html>
